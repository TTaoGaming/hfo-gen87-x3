{"files":{"sandbox/src/smoothers/physics-spring-smoother.ts":{"language":"typescript","mutants":[{"id":"10","mutatorName":"BlockStatement","replacement":"{}","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":4,"line":70},"start":{"column":45,"line":57}}},{"id":"11","mutatorName":"ObjectLiteral","replacement":"{}","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":5,"line":69},"start":{"column":37,"line":59}}},{"id":"12","mutatorName":"BooleanLiteral","replacement":"true","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":22,"line":62},"start":{"column":17,"line":62}}},{"id":"23","mutatorName":"ArithmeticOperator","replacement":"1 * 60","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":75,"line":86},"start":{"column":69,"line":86}}},{"id":"70","mutatorName":"BlockStatement","replacement":"{}","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":3,"line":141},"start":{"column":55,"line":137}}},{"id":"71","mutatorName":"ConditionalExpression","replacement":"true","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":37,"line":138},"start":{"column":7,"line":138}}},{"id":"72","mutatorName":"ConditionalExpression","replacement":"false","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":37,"line":138},"start":{"column":7,"line":138}}},{"id":"73","mutatorName":"EqualityOperator","replacement":"params.stiffness === undefined","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":37,"line":138},"start":{"column":7,"line":138}}},{"id":"74","mutatorName":"ConditionalExpression","replacement":"true","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":35,"line":139},"start":{"column":7,"line":139}}},{"id":"75","mutatorName":"ConditionalExpression","replacement":"false","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":35,"line":139},"start":{"column":7,"line":139}}},{"id":"76","mutatorName":"EqualityOperator","replacement":"params.damping === undefined","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":35,"line":139},"start":{"column":7,"line":139}}},{"id":"77","mutatorName":"ConditionalExpression","replacement":"true","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":32,"line":140},"start":{"column":7,"line":140}}},{"id":"78","mutatorName":"ConditionalExpression","replacement":"false","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":32,"line":140},"start":{"column":7,"line":140}}},{"id":"79","mutatorName":"EqualityOperator","replacement":"params.mass === undefined","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":32,"line":140},"start":{"column":7,"line":140}}},{"id":"2","mutatorName":"BooleanLiteral","replacement":"true","status":"Survived","static":false,"testsCompleted":8,"coveredBy":["6","7","8","9","14","15","16","17"],"location":{"end":{"column":29,"line":47},"start":{"column":24,"line":47}}},{"id":"3","mutatorName":"BlockStatement","replacement":"{}","statusReason":"[\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"nan\",\n    \"path\": [\n      \"position\",\n      \"x\"\n    ],\n    \"message\": \"Expected number, received nan\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"nan\",\n    \"path\": [\n      \"position\",\n      \"y\"\n    ],\n    \"message\": \"Expected number, received nan\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"nan\",\n    \"path\": [\n      \"velocity\",\n      \"x\"\n    ],\n    \"message\": \"Expected number, received nan\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"nan\",\n    \"path\": [\n      \"velocity\",\n      \"y\"\n    ],\n    \"message\": \"Expected number, received nan\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"nan\",\n    \"path\": [\n      \"prediction\",\n      \"x\"\n    ],\n    \"message\": \"Expected number, received nan\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"nan\",\n    \"path\": [\n      \"prediction\",\n      \"y\"\n    ],\n    \"message\": \"Expected number, received nan\"\n  }\n]","status":"Killed","static":false,"testsCompleted":2,"killedBy":["7"],"coveredBy":["6","7","8","9","14","15","16","17"],"location":{"end":{"column":3,"line":53},"start":{"column":42,"line":49}}},{"id":"4","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Cannot read properties of undefined (reading 'ts')","status":"Killed","static":false,"testsCompleted":1,"killedBy":["7"],"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":3,"line":126},"start":{"column":44,"line":55}}},{"id":"5","mutatorName":"ConditionalExpression","replacement":"true","statusReason":"expected null not to be null","status":"Killed","static":false,"testsCompleted":1,"killedBy":["7"],"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":43,"line":57},"start":{"column":7,"line":57}}},{"id":"6","mutatorName":"ConditionalExpression","replacement":"false","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":43,"line":57},"start":{"column":7,"line":57}}},{"id":"7","mutatorName":"LogicalOperator","replacement":"!frame.trackingOk && !frame.indexTip","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":43,"line":57},"start":{"column":7,"line":57}}},{"id":"8","mutatorName":"BooleanLiteral","replacement":"frame.trackingOk","statusReason":"expected null not to be null","status":"Killed","static":false,"testsCompleted":1,"killedBy":["7"],"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":24,"line":57},"start":{"column":7,"line":57}}},{"id":"9","mutatorName":"BooleanLiteral","replacement":"frame.indexTip","statusReason":"expected null not to be null","status":"Killed","static":false,"testsCompleted":1,"killedBy":["7"],"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":43,"line":57},"start":{"column":28,"line":57}}},{"id":"13","mutatorName":"BooleanLiteral","replacement":"this.initialized","statusReason":"expected 0.075 to be close to 0.9, received difference is 0.8250000000000001, but expected 0.05","status":"Killed","static":false,"testsCompleted":6,"killedBy":["16"],"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":24,"line":76},"start":{"column":7,"line":76}}},{"id":"14","mutatorName":"ConditionalExpression","replacement":"true","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":24,"line":76},"start":{"column":7,"line":76}}},{"id":"15","mutatorName":"ConditionalExpression","replacement":"false","statusReason":"expected 0.075 to be close to 0.9, received difference is 0.8250000000000001, but expected 0.05","status":"Killed","static":false,"testsCompleted":6,"killedBy":["16"],"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":24,"line":76},"start":{"column":7,"line":76}}},{"id":"16","mutatorName":"BlockStatement","replacement":"{}","statusReason":"expected 0.075 to be close to 0.9, received difference is 0.8250000000000001, but expected 0.05","status":"Killed","static":false,"testsCompleted":6,"killedBy":["16"],"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":4,"line":83},"start":{"column":26,"line":76}}},{"id":"17","mutatorName":"BooleanLiteral","replacement":"false","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":27,"line":82},"start":{"column":23,"line":82}}},{"id":"18","mutatorName":"ConditionalExpression","replacement":"true","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":32,"line":86},"start":{"column":12,"line":86}}},{"id":"19","mutatorName":"ConditionalExpression","replacement":"false","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":32,"line":86},"start":{"column":12,"line":86}}},{"id":"20","mutatorName":"EqualityOperator","replacement":"this.lastTs === null","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":32,"line":86},"start":{"column":12,"line":86}}},{"id":"21","mutatorName":"ArithmeticOperator","replacement":"(frame.ts - this.lastTs) * 1000","statusReason":"expected 1 to be close to 0.8, received difference is 0.19999999999999996, but expected 0.05","status":"Killed","static":false,"testsCompleted":2,"killedBy":["8"],"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":66,"line":86},"start":{"column":35,"line":86}}},{"id":"22","mutatorName":"ArithmeticOperator","replacement":"frame.ts + this.lastTs","statusReason":"expected +0 to be close to 0.8, received difference is 0.8, but expected 0.05","status":"Killed","static":false,"testsCompleted":2,"killedBy":["8"],"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":58,"line":86},"start":{"column":36,"line":86}}},{"id":"24","mutatorName":"ConditionalExpression","replacement":"true","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":14,"line":87},"start":{"column":7,"line":87}}},{"id":"25","mutatorName":"ConditionalExpression","replacement":"false","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":14,"line":87},"start":{"column":7,"line":87}}},{"id":"26","mutatorName":"EqualityOperator","replacement":"dt < 0","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":14,"line":87},"start":{"column":7,"line":87}}},{"id":"27","mutatorName":"EqualityOperator","replacement":"dt > 0","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":14,"line":87},"start":{"column":7,"line":87}}},{"id":"28","mutatorName":"ArithmeticOperator","replacement":"1 * 60","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":27,"line":87},"start":{"column":21,"line":87}}},{"id":"29","mutatorName":"ArithmeticOperator","replacement":"-this.stiffness * (this.posX - targetX) + this.damping * this.velX","statusReason":"expected 1 to be close to 0.8, received difference is 0.19999999999999996, but expected 0.05","status":"Killed","static":false,"testsCompleted":2,"killedBy":["8"],"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":84,"line":96},"start":{"column":18,"line":96}}},{"id":"30","mutatorName":"ArithmeticOperator","replacement":"-this.stiffness / (this.posX - targetX)","statusReason":"[\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"nan\",\n    \"path\": [\n      \"position\",\n      \"x\"\n    ],\n    \"message\": \"Expected number, received nan\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"nan\",\n    \"path\": [\n      \"velocity\",\n      \"x\"\n    ],\n    \"message\": \"Expected number, received nan\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"nan\",\n    \"path\": [\n      \"prediction\",\n      \"x\"\n    ],\n    \"message\": \"Expected number, received nan\"\n  }\n]","status":"Killed","static":false,"testsCompleted":2,"killedBy":["8"],"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":57,"line":96},"start":{"column":18,"line":96}}},{"id":"31","mutatorName":"UnaryOperator","replacement":"+this.stiffness","statusReason":"expected +0 to be close to 0.8, received difference is 0.8, but expected 0.05","status":"Killed","static":false,"testsCompleted":2,"killedBy":["8"],"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":33,"line":96},"start":{"column":18,"line":96}}},{"id":"32","mutatorName":"ArithmeticOperator","replacement":"this.posX + targetX","statusReason":"expected +0 to be close to 0.8, received difference is 0.8, but expected 0.05","status":"Killed","static":false,"testsCompleted":2,"killedBy":["8"],"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":56,"line":96},"start":{"column":37,"line":96}}},{"id":"33","mutatorName":"ArithmeticOperator","replacement":"this.damping / this.velX","statusReason":"expected +0 to be close to 0.8, received difference is 0.8, but expected 0.05","status":"Killed","static":false,"testsCompleted":2,"killedBy":["8"],"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":84,"line":96},"start":{"column":60,"line":96}}},{"id":"34","mutatorName":"ArithmeticOperator","replacement":"forceX * this.mass","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":36,"line":97},"start":{"column":18,"line":97}}},{"id":"35","mutatorName":"AssignmentOperator","replacement":"this.velX -= accelX * dt","statusReason":"expected +0 to be close to 0.8, received difference is 0.8, but expected 0.05","status":"Killed","static":false,"testsCompleted":2,"killedBy":["8"],"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":27,"line":98},"start":{"column":3,"line":98}}},{"id":"36","mutatorName":"ArithmeticOperator","replacement":"accelX / dt","statusReason":"expected 1 to be close to 0.8, received difference is 0.19999999999999996, but expected 0.05","status":"Killed","static":false,"testsCompleted":2,"killedBy":["8"],"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":27,"line":98},"start":{"column":16,"line":98}}},{"id":"37","mutatorName":"AssignmentOperator","replacement":"this.posX -= this.velX * dt","statusReason":"expected +0 to be close to 0.8, received difference is 0.8, but expected 0.05","status":"Killed","static":false,"testsCompleted":2,"killedBy":["8"],"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":30,"line":99},"start":{"column":3,"line":99}}},{"id":"38","mutatorName":"ArithmeticOperator","replacement":"this.velX / dt","statusReason":"expected 1 to be close to 0.8, received difference is 0.19999999999999996, but expected 0.05","status":"Killed","static":false,"testsCompleted":2,"killedBy":["8"],"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":30,"line":99},"start":{"column":16,"line":99}}},{"id":"39","mutatorName":"ArithmeticOperator","replacement":"-this.stiffness * (this.posY - targetY) + this.damping * this.velY","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":84,"line":102},"start":{"column":18,"line":102}}},{"id":"40","mutatorName":"ArithmeticOperator","replacement":"-this.stiffness / (this.posY - targetY)","statusReason":"[\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"nan\",\n    \"path\": [\n      \"position\",\n      \"y\"\n    ],\n    \"message\": \"Expected number, received nan\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"nan\",\n    \"path\": [\n      \"velocity\",\n      \"y\"\n    ],\n    \"message\": \"Expected number, received nan\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"nan\",\n    \"path\": [\n      \"prediction\",\n      \"y\"\n    ],\n    \"message\": \"Expected number, received nan\"\n  }\n]","status":"Killed","static":false,"testsCompleted":2,"killedBy":["8"],"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":57,"line":102},"start":{"column":18,"line":102}}},{"id":"41","mutatorName":"UnaryOperator","replacement":"+this.stiffness","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":33,"line":102},"start":{"column":18,"line":102}}},{"id":"42","mutatorName":"ArithmeticOperator","replacement":"this.posY + targetY","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":56,"line":102},"start":{"column":37,"line":102}}},{"id":"43","mutatorName":"ArithmeticOperator","replacement":"this.damping / this.velY","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":84,"line":102},"start":{"column":60,"line":102}}},{"id":"44","mutatorName":"ArithmeticOperator","replacement":"forceY * this.mass","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":36,"line":103},"start":{"column":18,"line":103}}},{"id":"45","mutatorName":"AssignmentOperator","replacement":"this.velY -= accelY * dt","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":27,"line":104},"start":{"column":3,"line":104}}},{"id":"46","mutatorName":"ArithmeticOperator","replacement":"accelY / dt","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":27,"line":104},"start":{"column":16,"line":104}}},{"id":"47","mutatorName":"AssignmentOperator","replacement":"this.posY -= this.velY * dt","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":30,"line":105},"start":{"column":3,"line":105}}},{"id":"48","mutatorName":"ArithmeticOperator","replacement":"this.velY / dt","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":30,"line":105},"start":{"column":16,"line":105}}},{"id":"49","mutatorName":"MethodExpression","replacement":"Math.min(0, Math.min(1, this.posX))","statusReason":"expected +0 to be close to 0.8, received difference is 0.8, but expected 0.05","status":"Killed","static":false,"testsCompleted":2,"killedBy":["8"],"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":50,"line":108},"start":{"column":15,"line":108}}},{"id":"50","mutatorName":"MethodExpression","replacement":"Math.max(1, this.posX)","statusReason":"expected 1 to be close to 0.8, received difference is 0.19999999999999996, but expected 0.05","status":"Killed","static":false,"testsCompleted":2,"killedBy":["8"],"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":49,"line":108},"start":{"column":27,"line":108}}},{"id":"51","mutatorName":"MethodExpression","replacement":"Math.min(0, Math.min(1, this.posY))","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":50,"line":109},"start":{"column":15,"line":109}}},{"id":"52","mutatorName":"MethodExpression","replacement":"Math.max(1, this.posY)","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":49,"line":109},"start":{"column":27,"line":109}}},{"id":"53","mutatorName":"MethodExpression","replacement":"Math.min(0, Math.min(1, this.posX + this.velX * (1 / 60)))","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":75,"line":112},"start":{"column":17,"line":112}}},{"id":"54","mutatorName":"MethodExpression","replacement":"Math.max(1, this.posX + this.velX * (1 / 60))","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":74,"line":112},"start":{"column":29,"line":112}}},{"id":"55","mutatorName":"ArithmeticOperator","replacement":"this.posX - this.velX * (1 / 60)","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":73,"line":112},"start":{"column":41,"line":112}}},{"id":"56","mutatorName":"ArithmeticOperator","replacement":"this.velX / (1 / 60)","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":73,"line":112},"start":{"column":53,"line":112}}},{"id":"57","mutatorName":"ArithmeticOperator","replacement":"1 * 60","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":72,"line":112},"start":{"column":66,"line":112}}},{"id":"58","mutatorName":"MethodExpression","replacement":"Math.min(0, Math.min(1, this.posY + this.velY * (1 / 60)))","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":75,"line":113},"start":{"column":17,"line":113}}},{"id":"59","mutatorName":"MethodExpression","replacement":"Math.max(1, this.posY + this.velY * (1 / 60))","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":74,"line":113},"start":{"column":29,"line":113}}},{"id":"60","mutatorName":"ArithmeticOperator","replacement":"this.posY - this.velY * (1 / 60)","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":73,"line":113},"start":{"column":41,"line":113}}},{"id":"61","mutatorName":"ArithmeticOperator","replacement":"this.velY / (1 / 60)","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":73,"line":113},"start":{"column":53,"line":113}}},{"id":"62","mutatorName":"ArithmeticOperator","replacement":"1 * 60","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":72,"line":113},"start":{"column":66,"line":113}}},{"id":"63","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"[\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"ts\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"expected\": \"'left' | 'right' | 'none'\",\n    \"received\": \"undefined\",\n    \"code\": \"invalid_type\",\n    \"path\": [\n      \"handId\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"boolean\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"trackingOk\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"boolean\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"palmFacing\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"expected\": \"'Open_Palm' | 'Pointing_Up' | 'Victory' | 'Thumb_Up' | 'Thumb_Down' | 'Closed_Fist' | 'ILoveYou' | 'None'\",\n    \"received\": \"undefined\",\n    \"code\": \"invalid_type\",\n    \"path\": [\n      \"label\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"confidence\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"object\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"position\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"object\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"velocity\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"object\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"prediction\"\n    ],\n    \"message\": \"Required\"\n  }\n]","status":"Killed","static":false,"testsCompleted":1,"killedBy":["7"],"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":4,"line":125},"start":{"column":36,"line":115}}},{"id":"64","mutatorName":"BooleanLiteral","replacement":"false","status":"Survived","static":false,"testsCompleted":7,"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":20,"line":118},"start":{"column":16,"line":118}}},{"id":"65","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"[\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"position\",\n      \"x\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"position\",\n      \"y\"\n    ],\n    \"message\": \"Required\"\n  }\n]","status":"Killed","static":false,"testsCompleted":1,"killedBy":["7"],"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":44,"line":122},"start":{"column":14,"line":122}}},{"id":"66","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"[\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"velocity\",\n      \"x\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"velocity\",\n      \"y\"\n    ],\n    \"message\": \"Required\"\n  }\n]","status":"Killed","static":false,"testsCompleted":1,"killedBy":["7"],"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":44,"line":123},"start":{"column":14,"line":123}}},{"id":"67","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"[\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"prediction\",\n      \"x\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"prediction\",\n      \"y\"\n    ],\n    \"message\": \"Required\"\n  }\n]","status":"Killed","static":false,"testsCompleted":1,"killedBy":["7"],"coveredBy":["7","8","9","14","15","16","17"],"location":{"end":{"column":38,"line":124},"start":{"column":16,"line":124}}},{"id":"68","mutatorName":"BlockStatement","replacement":"{}","statusReason":"expected 1 to be close to 0.9, received difference is 0.09999999999999998, but expected 0.05","status":"Killed","static":false,"testsCompleted":4,"killedBy":["16"],"coveredBy":["8","9","15","16"],"location":{"end":{"column":3,"line":135},"start":{"column":16,"line":128}}},{"id":"69","mutatorName":"BooleanLiteral","replacement":"true","statusReason":"expected 0.075 to be close to 0.9, received difference is 0.8250000000000001, but expected 0.05","status":"Killed","static":false,"testsCompleted":4,"killedBy":["16"],"coveredBy":["8","9","15","16"],"location":{"end":{"column":27,"line":134},"start":{"column":22,"line":134}}}],"source":"/**\r\n * Physics Spring-Damper Smoother - IMPLEMENTED (TDD GREEN Phase)\r\n *\r\n * Gen87.X3 | Phase: VALIDATE (V) | TDD GREEN\r\n *\r\n * Reference: Rapier Physics Engine - Spring-Damper Model\r\n * https://rapier.rs/docs/user_guides/javascript/rigid_body_simulation\r\n *\r\n * Uses a critically damped spring system to create smooth cursor movement:\r\n * - Spring constant (k): Stiffness - higher = snappier\r\n * - Damping coefficient (c): Energy dissipation - higher = less oscillation\r\n * - Mass (m): Inertia - higher = more sluggish\r\n *\r\n * For critical damping: c = 2 * sqrt(k * m)\r\n *\r\n * TRL 9: Industry-standard physics model used in games, UI, robotics\r\n */\r\n\r\nimport type { SmoothedFrame, SmootherPort } from '../contracts/ports.js';\r\nimport type { SensorFrame } from '../contracts/schemas.js';\r\nimport { SmoothedFrameSchema } from '../contracts/schemas.js';\r\n\r\nexport interface SpringDamperConfig {\r\n\t/** Spring constant (stiffness) - higher = snappier */\r\n\tstiffness: number;\r\n\t/** Damping coefficient - higher = less oscillation */\r\n\tdamping: number;\r\n\t/** Mass - higher = more sluggish */\r\n\tmass: number;\r\n}\r\n\r\n/**\r\n * PhysicsSpringDamperSmoother - Spring-Damper Physics\r\n *\r\n * Simulates a critically damped spring pulling cursor toward target.\r\n * Natural feel with momentum and deceleration.\r\n */\r\nexport class PhysicsSpringDamperSmoother implements SmootherPort {\r\n\tprivate stiffness: number;\r\n\tprivate damping: number;\r\n\tprivate mass: number;\r\n\tprivate posX = 0;\r\n\tprivate posY = 0;\r\n\tprivate velX = 0;\r\n\tprivate velY = 0;\r\n\tprivate lastTs: number | null = null;\r\n\tprivate initialized = false;\r\n\r\n\tconstructor(config: SpringDamperConfig) {\r\n\t\tthis.stiffness = config.stiffness;\r\n\t\tthis.damping = config.damping;\r\n\t\tthis.mass = config.mass;\r\n\t}\r\n\r\n\tsmooth(frame: SensorFrame): SmoothedFrame {\r\n\t\t// If no valid tracking, pass through with null position\r\n\t\tif (!frame.trackingOk || !frame.indexTip) {\r\n\t\t\tthis.reset();\r\n\t\t\treturn SmoothedFrameSchema.parse({\r\n\t\t\t\tts: frame.ts,\r\n\t\t\t\thandId: frame.handId,\r\n\t\t\t\ttrackingOk: false,\r\n\t\t\t\tpalmFacing: frame.palmFacing,\r\n\t\t\t\tlabel: frame.label,\r\n\t\t\t\tconfidence: frame.confidence,\r\n\t\t\t\tposition: null,\r\n\t\t\t\tvelocity: null,\r\n\t\t\t\tprediction: null,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tconst targetX = frame.indexTip.x;\r\n\t\tconst targetY = frame.indexTip.y;\r\n\r\n\t\t// Initialize on first frame\r\n\t\tif (!this.initialized) {\r\n\t\t\tthis.posX = targetX;\r\n\t\t\tthis.posY = targetY;\r\n\t\t\tthis.velX = 0;\r\n\t\t\tthis.velY = 0;\r\n\t\t\tthis.lastTs = frame.ts;\r\n\t\t\tthis.initialized = true;\r\n\t\t}\r\n\r\n\t\t// Calculate time delta\r\n\t\tlet dt = this.lastTs !== null ? (frame.ts - this.lastTs) / 1000 : 1 / 60;\r\n\t\tif (dt <= 0) dt = 1 / 60;\r\n\t\tthis.lastTs = frame.ts;\r\n\r\n\t\t// Spring-damper physics: F = -k*x - c*v\r\n\t\t// a = F/m\r\n\t\t// v += a * dt\r\n\t\t// x += v * dt\r\n\r\n\t\t// X axis\r\n\t\tconst forceX = -this.stiffness * (this.posX - targetX) - this.damping * this.velX;\r\n\t\tconst accelX = forceX / this.mass;\r\n\t\tthis.velX += accelX * dt;\r\n\t\tthis.posX += this.velX * dt;\r\n\r\n\t\t// Y axis\r\n\t\tconst forceY = -this.stiffness * (this.posY - targetY) - this.damping * this.velY;\r\n\t\tconst accelY = forceY / this.mass;\r\n\t\tthis.velY += accelY * dt;\r\n\t\tthis.posY += this.velY * dt;\r\n\r\n\t\t// Clamp to [0,1] range\r\n\t\tthis.posX = Math.max(0, Math.min(1, this.posX));\r\n\t\tthis.posY = Math.max(0, Math.min(1, this.posY));\r\n\r\n\t\t// Predict one frame ahead\r\n\t\tconst predX = Math.max(0, Math.min(1, this.posX + this.velX * (1 / 60)));\r\n\t\tconst predY = Math.max(0, Math.min(1, this.posY + this.velY * (1 / 60)));\r\n\r\n\t\treturn SmoothedFrameSchema.parse({\r\n\t\t\tts: frame.ts,\r\n\t\t\thandId: frame.handId,\r\n\t\t\ttrackingOk: true,\r\n\t\t\tpalmFacing: frame.palmFacing,\r\n\t\t\tlabel: frame.label,\r\n\t\t\tconfidence: frame.confidence,\r\n\t\t\tposition: { x: this.posX, y: this.posY },\r\n\t\t\tvelocity: { x: this.velX, y: this.velY },\r\n\t\t\tprediction: { x: predX, y: predY },\r\n\t\t});\r\n\t}\r\n\r\n\treset(): void {\r\n\t\tthis.posX = 0;\r\n\t\tthis.posY = 0;\r\n\t\tthis.velX = 0;\r\n\t\tthis.velY = 0;\r\n\t\tthis.lastTs = null;\r\n\t\tthis.initialized = false;\r\n\t}\r\n\r\n\tsetParams(params: Partial<SpringDamperConfig>): void {\r\n\t\tif (params.stiffness !== undefined) this.stiffness = params.stiffness;\r\n\t\tif (params.damping !== undefined) this.damping = params.damping;\r\n\t\tif (params.mass !== undefined) this.mass = params.mass;\r\n\t}\r\n}\r\n"},"sandbox/src/smoothers/predictive-smoother.ts":{"language":"typescript","mutants":[{"id":"87","mutatorName":"BlockStatement","replacement":"{}","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":4,"line":70},"start":{"column":45,"line":57}}},{"id":"88","mutatorName":"ObjectLiteral","replacement":"{}","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":5,"line":69},"start":{"column":37,"line":59}}},{"id":"89","mutatorName":"BooleanLiteral","replacement":"true","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":22,"line":62},"start":{"column":17,"line":62}}},{"id":"112","mutatorName":"ArithmeticOperator","replacement":"1 * 60","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":28,"line":79},"start":{"column":22,"line":79}}},{"id":"128","mutatorName":"BlockStatement","replacement":"{}","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":5,"line":96},"start":{"column":37,"line":91}}},{"id":"129","mutatorName":"ArithmeticOperator","replacement":"(this.velX - this.lastVelX) * dt","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":55,"line":92},"start":{"column":23,"line":92}}},{"id":"130","mutatorName":"ArithmeticOperator","replacement":"this.velX + this.lastVelX","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":49,"line":92},"start":{"column":24,"line":92}}},{"id":"131","mutatorName":"ArithmeticOperator","replacement":"(this.velY - this.lastVelY) * dt","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":55,"line":93},"start":{"column":23,"line":93}}},{"id":"132","mutatorName":"ArithmeticOperator","replacement":"this.velY + this.lastVelY","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":49,"line":93},"start":{"column":24,"line":93}}},{"id":"133","mutatorName":"ArithmeticOperator","replacement":"alpha * rawAccelX - (1 - alpha) * this.accelX","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":64,"line":94},"start":{"column":19,"line":94}}},{"id":"134","mutatorName":"ArithmeticOperator","replacement":"alpha / rawAccelX","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":36,"line":94},"start":{"column":19,"line":94}}},{"id":"135","mutatorName":"ArithmeticOperator","replacement":"(1 - alpha) / this.accelX","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":64,"line":94},"start":{"column":39,"line":94}}},{"id":"136","mutatorName":"ArithmeticOperator","replacement":"1 + alpha","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":49,"line":94},"start":{"column":40,"line":94}}},{"id":"137","mutatorName":"ArithmeticOperator","replacement":"alpha * rawAccelY - (1 - alpha) * this.accelY","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":64,"line":95},"start":{"column":19,"line":95}}},{"id":"138","mutatorName":"ArithmeticOperator","replacement":"alpha / rawAccelY","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":36,"line":95},"start":{"column":19,"line":95}}},{"id":"139","mutatorName":"ArithmeticOperator","replacement":"(1 - alpha) / this.accelY","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":64,"line":95},"start":{"column":39,"line":95}}},{"id":"140","mutatorName":"ArithmeticOperator","replacement":"1 + alpha","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":49,"line":95},"start":{"column":40,"line":95}}},{"id":"167","mutatorName":"BlockStatement","replacement":"{}","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":3,"line":152},"start":{"column":53,"line":147}}},{"id":"168","mutatorName":"ConditionalExpression","replacement":"true","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":40,"line":148},"start":{"column":7,"line":148}}},{"id":"169","mutatorName":"ConditionalExpression","replacement":"false","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":40,"line":148},"start":{"column":7,"line":148}}},{"id":"170","mutatorName":"EqualityOperator","replacement":"params.predictionMs === undefined","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":40,"line":148},"start":{"column":7,"line":148}}},{"id":"171","mutatorName":"ConditionalExpression","replacement":"true","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":45,"line":149},"start":{"column":7,"line":149}}},{"id":"172","mutatorName":"ConditionalExpression","replacement":"false","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":45,"line":149},"start":{"column":7,"line":149}}},{"id":"173","mutatorName":"EqualityOperator","replacement":"params.velocitySmoothing === undefined","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":45,"line":149},"start":{"column":7,"line":149}}},{"id":"174","mutatorName":"ConditionalExpression","replacement":"true","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":38,"line":151},"start":{"column":7,"line":151}}},{"id":"175","mutatorName":"ConditionalExpression","replacement":"false","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":38,"line":151},"start":{"column":7,"line":151}}},{"id":"176","mutatorName":"EqualityOperator","replacement":"params.usePhysics === undefined","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":38,"line":151},"start":{"column":7,"line":151}}},{"id":"80","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Cannot read properties of undefined (reading 'predictionMs')","status":"Killed","static":false,"testsCompleted":2,"killedBy":["11"],"coveredBy":["10","11","12","13","17"],"location":{"end":{"column":3,"line":53},"start":{"column":40,"line":51}}},{"id":"81","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Cannot read properties of undefined (reading 'prediction')","status":"Killed","static":false,"testsCompleted":1,"killedBy":["11"],"coveredBy":["11","12","13","17"],"location":{"end":{"column":3,"line":133},"start":{"column":44,"line":55}}},{"id":"82","mutatorName":"ConditionalExpression","replacement":"true","statusReason":"expected null not to be null","status":"Killed","static":false,"testsCompleted":1,"killedBy":["11"],"coveredBy":["11","12","13","17"],"location":{"end":{"column":43,"line":57},"start":{"column":7,"line":57}}},{"id":"83","mutatorName":"ConditionalExpression","replacement":"false","status":"Survived","static":false,"testsCompleted":4,"coveredBy":["11","12","13","17"],"location":{"end":{"column":43,"line":57},"start":{"column":7,"line":57}}},{"id":"84","mutatorName":"LogicalOperator","replacement":"!frame.trackingOk && !frame.indexTip","status":"Survived","static":false,"testsCompleted":4,"coveredBy":["11","12","13","17"],"location":{"end":{"column":43,"line":57},"start":{"column":7,"line":57}}},{"id":"85","mutatorName":"BooleanLiteral","replacement":"frame.trackingOk","statusReason":"expected null not to be null","status":"Killed","static":false,"testsCompleted":1,"killedBy":["11"],"coveredBy":["11","12","13","17"],"location":{"end":{"column":24,"line":57},"start":{"column":7,"line":57}}},{"id":"86","mutatorName":"BooleanLiteral","replacement":"frame.indexTip","statusReason":"expected null not to be null","status":"Killed","static":false,"testsCompleted":1,"killedBy":["11"],"coveredBy":["11","12","13","17"],"location":{"end":{"column":43,"line":57},"start":{"column":28,"line":57}}},{"id":"90","mutatorName":"MethodExpression","replacement":"Math.min(0, Math.min(1, frame.indexTip.x))","statusReason":"expected 0 to be greater than 0","status":"Killed","static":false,"testsCompleted":2,"killedBy":["12"],"coveredBy":["11","12","13","17"],"location":{"end":{"column":55,"line":73},"start":{"column":13,"line":73}}},{"id":"91","mutatorName":"MethodExpression","replacement":"Math.max(1, frame.indexTip.x)","statusReason":"expected 1 to be greater than 1","status":"Killed","static":false,"testsCompleted":2,"killedBy":["12"],"coveredBy":["11","12","13","17"],"location":{"end":{"column":54,"line":73},"start":{"column":25,"line":73}}},{"id":"92","mutatorName":"MethodExpression","replacement":"Math.min(0, Math.min(1, frame.indexTip.y))","status":"Survived","static":false,"testsCompleted":4,"coveredBy":["11","12","13","17"],"location":{"end":{"column":55,"line":74},"start":{"column":13,"line":74}}},{"id":"93","mutatorName":"MethodExpression","replacement":"Math.max(1, frame.indexTip.y)","status":"Survived","static":false,"testsCompleted":4,"coveredBy":["11","12","13","17"],"location":{"end":{"column":54,"line":74},"start":{"column":25,"line":74}}},{"id":"94","mutatorName":"ConditionalExpression","replacement":"true","status":"Survived","static":false,"testsCompleted":4,"coveredBy":["11","12","13","17"],"location":{"end":{"column":73,"line":77},"start":{"column":7,"line":77}}},{"id":"95","mutatorName":"ConditionalExpression","replacement":"false","statusReason":"expected 0.4 to be greater than 0.4","status":"Killed","static":false,"testsCompleted":2,"killedBy":["12"],"coveredBy":["11","12","13","17"],"location":{"end":{"column":73,"line":77},"start":{"column":7,"line":77}}},{"id":"96","mutatorName":"LogicalOperator","replacement":"this.lastX !== null && this.lastY !== null || this.lastTs !== null","status":"Survived","static":false,"testsCompleted":4,"coveredBy":["11","12","13","17"],"location":{"end":{"column":73,"line":77},"start":{"column":7,"line":77}}},{"id":"97","mutatorName":"ConditionalExpression","replacement":"true","status":"Survived","static":false,"testsCompleted":4,"coveredBy":["11","12","13","17"],"location":{"end":{"column":49,"line":77},"start":{"column":7,"line":77}}},{"id":"98","mutatorName":"LogicalOperator","replacement":"this.lastX !== null || this.lastY !== null","status":"Survived","static":false,"testsCompleted":4,"coveredBy":["11","12","13","17"],"location":{"end":{"column":49,"line":77},"start":{"column":7,"line":77}}},{"id":"99","mutatorName":"ConditionalExpression","replacement":"true","status":"Survived","static":false,"testsCompleted":4,"coveredBy":["11","12","13","17"],"location":{"end":{"column":26,"line":77},"start":{"column":7,"line":77}}},{"id":"100","mutatorName":"EqualityOperator","replacement":"this.lastX === null","statusReason":"expected 0.4 to be greater than 0.4","status":"Killed","static":false,"testsCompleted":2,"killedBy":["12"],"coveredBy":["11","12","13","17"],"location":{"end":{"column":26,"line":77},"start":{"column":7,"line":77}}},{"id":"101","mutatorName":"ConditionalExpression","replacement":"true","status":"Survived","static":false,"testsCompleted":2,"coveredBy":["12","13"],"location":{"end":{"column":49,"line":77},"start":{"column":30,"line":77}}},{"id":"102","mutatorName":"EqualityOperator","replacement":"this.lastY === null","statusReason":"expected 0.4 to be greater than 0.4","status":"Killed","static":false,"testsCompleted":1,"killedBy":["12"],"coveredBy":["12","13"],"location":{"end":{"column":49,"line":77},"start":{"column":30,"line":77}}},{"id":"103","mutatorName":"ConditionalExpression","replacement":"true","status":"Survived","static":false,"testsCompleted":2,"coveredBy":["12","13"],"location":{"end":{"column":73,"line":77},"start":{"column":53,"line":77}}},{"id":"104","mutatorName":"EqualityOperator","replacement":"this.lastTs === null","statusReason":"expected 0.4 to be greater than 0.4","status":"Killed","static":false,"testsCompleted":1,"killedBy":["12"],"coveredBy":["12","13"],"location":{"end":{"column":73,"line":77},"start":{"column":53,"line":77}}},{"id":"105","mutatorName":"BlockStatement","replacement":"{}","statusReason":"expected 0.4 to be greater than 0.4","status":"Killed","static":false,"testsCompleted":1,"killedBy":["12"],"coveredBy":["12","13"],"location":{"end":{"column":4,"line":100},"start":{"column":75,"line":77}}},{"id":"106","mutatorName":"ArithmeticOperator","replacement":"(frame.ts - this.lastTs) * 1000","status":"Survived","static":false,"testsCompleted":2,"coveredBy":["12","13"],"location":{"end":{"column":44,"line":78},"start":{"column":13,"line":78}}},{"id":"107","mutatorName":"ArithmeticOperator","replacement":"frame.ts + this.lastTs","status":"Survived","static":false,"testsCompleted":2,"coveredBy":["12","13"],"location":{"end":{"column":36,"line":78},"start":{"column":14,"line":78}}},{"id":"108","mutatorName":"ConditionalExpression","replacement":"true","status":"Survived","static":false,"testsCompleted":2,"coveredBy":["12","13"],"location":{"end":{"column":15,"line":79},"start":{"column":8,"line":79}}},{"id":"109","mutatorName":"ConditionalExpression","replacement":"false","status":"Survived","static":false,"testsCompleted":2,"coveredBy":["12","13"],"location":{"end":{"column":15,"line":79},"start":{"column":8,"line":79}}},{"id":"110","mutatorName":"EqualityOperator","replacement":"dt < 0","status":"Survived","static":false,"testsCompleted":2,"coveredBy":["12","13"],"location":{"end":{"column":15,"line":79},"start":{"column":8,"line":79}}},{"id":"111","mutatorName":"EqualityOperator","replacement":"dt > 0","status":"Survived","static":false,"testsCompleted":2,"coveredBy":["12","13"],"location":{"end":{"column":15,"line":79},"start":{"column":8,"line":79}}},{"id":"113","mutatorName":"ArithmeticOperator","replacement":"(x - this.lastX) * dt","status":"Survived","static":false,"testsCompleted":2,"coveredBy":["12","13"],"location":{"end":{"column":41,"line":82},"start":{"column":20,"line":82}}},{"id":"114","mutatorName":"ArithmeticOperator","replacement":"x + this.lastX","status":"Survived","static":false,"testsCompleted":2,"coveredBy":["12","13"],"location":{"end":{"column":35,"line":82},"start":{"column":21,"line":82}}},{"id":"115","mutatorName":"ArithmeticOperator","replacement":"(y - this.lastY) * dt","status":"Survived","static":false,"testsCompleted":2,"coveredBy":["12","13"],"location":{"end":{"column":41,"line":83},"start":{"column":20,"line":83}}},{"id":"116","mutatorName":"ArithmeticOperator","replacement":"y + this.lastY","status":"Survived","static":false,"testsCompleted":2,"coveredBy":["12","13"],"location":{"end":{"column":35,"line":83},"start":{"column":21,"line":83}}},{"id":"117","mutatorName":"LogicalOperator","replacement":"this.config.velocitySmoothing && 0.5","statusReason":"[\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"nan\",\n    \"path\": [\n      \"velocity\",\n      \"x\"\n    ],\n    \"message\": \"Expected number, received nan\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"nan\",\n    \"path\": [\n      \"velocity\",\n      \"y\"\n    ],\n    \"message\": \"Expected number, received nan\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"nan\",\n    \"path\": [\n      \"prediction\",\n      \"x\"\n    ],\n    \"message\": \"Expected number, received nan\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"nan\",\n    \"path\": [\n      \"prediction\",\n      \"y\"\n    ],\n    \"message\": \"Expected number, received nan\"\n  }\n]","status":"Killed","static":false,"testsCompleted":1,"killedBy":["12"],"coveredBy":["12","13"],"location":{"end":{"column":54,"line":86},"start":{"column":18,"line":86}}},{"id":"118","mutatorName":"ArithmeticOperator","replacement":"alpha * rawVelX - (1 - alpha) * this.velX","status":"Survived","static":false,"testsCompleted":2,"coveredBy":["12","13"],"location":{"end":{"column":57,"line":87},"start":{"column":16,"line":87}}},{"id":"119","mutatorName":"ArithmeticOperator","replacement":"alpha / rawVelX","status":"Survived","static":false,"testsCompleted":2,"coveredBy":["12","13"],"location":{"end":{"column":31,"line":87},"start":{"column":16,"line":87}}},{"id":"120","mutatorName":"ArithmeticOperator","replacement":"(1 - alpha) / this.velX","status":"Survived","static":false,"testsCompleted":2,"coveredBy":["12","13"],"location":{"end":{"column":57,"line":87},"start":{"column":34,"line":87}}},{"id":"121","mutatorName":"ArithmeticOperator","replacement":"1 + alpha","status":"Survived","static":false,"testsCompleted":2,"coveredBy":["12","13"],"location":{"end":{"column":44,"line":87},"start":{"column":35,"line":87}}},{"id":"122","mutatorName":"ArithmeticOperator","replacement":"alpha * rawVelY - (1 - alpha) * this.velY","status":"Survived","static":false,"testsCompleted":2,"coveredBy":["12","13"],"location":{"end":{"column":57,"line":88},"start":{"column":16,"line":88}}},{"id":"123","mutatorName":"ArithmeticOperator","replacement":"alpha / rawVelY","status":"Survived","static":false,"testsCompleted":2,"coveredBy":["12","13"],"location":{"end":{"column":31,"line":88},"start":{"column":16,"line":88}}},{"id":"124","mutatorName":"ArithmeticOperator","replacement":"(1 - alpha) / this.velY","status":"Survived","static":false,"testsCompleted":2,"coveredBy":["12","13"],"location":{"end":{"column":57,"line":88},"start":{"column":34,"line":88}}},{"id":"125","mutatorName":"ArithmeticOperator","replacement":"1 + alpha","status":"Survived","static":false,"testsCompleted":2,"coveredBy":["12","13"],"location":{"end":{"column":44,"line":88},"start":{"column":35,"line":88}}},{"id":"126","mutatorName":"ConditionalExpression","replacement":"true","status":"Survived","static":false,"testsCompleted":2,"coveredBy":["12","13"],"location":{"end":{"column":35,"line":91},"start":{"column":8,"line":91}}},{"id":"127","mutatorName":"ConditionalExpression","replacement":"false","status":"Survived","static":false,"testsCompleted":2,"coveredBy":["12","13"],"location":{"end":{"column":35,"line":91},"start":{"column":8,"line":91}}},{"id":"141","mutatorName":"ArithmeticOperator","replacement":"this.config.predictionMs * 1000","status":"Survived","static":false,"testsCompleted":4,"coveredBy":["11","12","13","17"],"location":{"end":{"column":52,"line":108},"start":{"column":21,"line":108}}},{"id":"142","mutatorName":"ArithmeticOperator","replacement":"x - this.velX * lookAhead","statusReason":"expected 0.35078124999999993 to be greater than 0.4","status":"Killed","static":false,"testsCompleted":2,"killedBy":["12"],"coveredBy":["11","12","13","17"],"location":{"end":{"column":40,"line":109},"start":{"column":15,"line":109}}},{"id":"143","mutatorName":"ArithmeticOperator","replacement":"this.velX / lookAhead","status":"Survived","static":false,"testsCompleted":4,"coveredBy":["11","12","13","17"],"location":{"end":{"column":40,"line":109},"start":{"column":19,"line":109}}},{"id":"144","mutatorName":"ArithmeticOperator","replacement":"y - this.velY * lookAhead","status":"Survived","static":false,"testsCompleted":4,"coveredBy":["11","12","13","17"],"location":{"end":{"column":40,"line":110},"start":{"column":15,"line":110}}},{"id":"145","mutatorName":"ArithmeticOperator","replacement":"this.velY / lookAhead","status":"Survived","static":false,"testsCompleted":4,"coveredBy":["11","12","13","17"],"location":{"end":{"column":40,"line":110},"start":{"column":19,"line":110}}},{"id":"146","mutatorName":"ConditionalExpression","replacement":"true","status":"Survived","static":false,"testsCompleted":4,"coveredBy":["11","12","13","17"],"location":{"end":{"column":29,"line":113},"start":{"column":7,"line":113}}},{"id":"147","mutatorName":"ConditionalExpression","replacement":"false","status":"Survived","static":false,"testsCompleted":4,"coveredBy":["11","12","13","17"],"location":{"end":{"column":29,"line":113},"start":{"column":7,"line":113}}},{"id":"148","mutatorName":"BlockStatement","replacement":"{}","status":"Survived","static":false,"testsCompleted":4,"coveredBy":["11","12","13","17"],"location":{"end":{"column":4,"line":116},"start":{"column":31,"line":113}}},{"id":"149","mutatorName":"AssignmentOperator","replacement":"predX -= 0.5 * this.accelX * lookAhead * lookAhead","status":"Survived","static":false,"testsCompleted":4,"coveredBy":["11","12","13","17"],"location":{"end":{"column":54,"line":114},"start":{"column":4,"line":114}}},{"id":"150","mutatorName":"ArithmeticOperator","replacement":"0.5 * this.accelX * lookAhead / lookAhead","status":"Survived","static":false,"testsCompleted":4,"coveredBy":["11","12","13","17"],"location":{"end":{"column":54,"line":114},"start":{"column":13,"line":114}}},{"id":"151","mutatorName":"ArithmeticOperator","replacement":"0.5 * this.accelX / lookAhead","status":"Survived","static":false,"testsCompleted":4,"coveredBy":["11","12","13","17"],"location":{"end":{"column":42,"line":114},"start":{"column":13,"line":114}}},{"id":"152","mutatorName":"ArithmeticOperator","replacement":"0.5 / this.accelX","status":"Survived","static":false,"testsCompleted":4,"coveredBy":["11","12","13","17"],"location":{"end":{"column":30,"line":114},"start":{"column":13,"line":114}}},{"id":"153","mutatorName":"AssignmentOperator","replacement":"predY -= 0.5 * this.accelY * lookAhead * lookAhead","status":"Survived","static":false,"testsCompleted":4,"coveredBy":["11","12","13","17"],"location":{"end":{"column":54,"line":115},"start":{"column":4,"line":115}}},{"id":"154","mutatorName":"ArithmeticOperator","replacement":"0.5 * this.accelY * lookAhead / lookAhead","status":"Survived","static":false,"testsCompleted":4,"coveredBy":["11","12","13","17"],"location":{"end":{"column":54,"line":115},"start":{"column":13,"line":115}}},{"id":"155","mutatorName":"ArithmeticOperator","replacement":"0.5 * this.accelY / lookAhead","status":"Survived","static":false,"testsCompleted":4,"coveredBy":["11","12","13","17"],"location":{"end":{"column":42,"line":115},"start":{"column":13,"line":115}}},{"id":"156","mutatorName":"ArithmeticOperator","replacement":"0.5 / this.accelY","status":"Survived","static":false,"testsCompleted":4,"coveredBy":["11","12","13","17"],"location":{"end":{"column":30,"line":115},"start":{"column":13,"line":115}}},{"id":"157","mutatorName":"MethodExpression","replacement":"Math.min(0, Math.min(1, predX))","statusReason":"expected 0 to be greater than 0.4","status":"Killed","static":false,"testsCompleted":2,"killedBy":["12"],"coveredBy":["11","12","13","17"],"location":{"end":{"column":42,"line":119},"start":{"column":11,"line":119}}},{"id":"158","mutatorName":"MethodExpression","replacement":"Math.max(1, predX)","statusReason":"[\n  {\n    \"code\": \"too_big\",\n    \"maximum\": 1,\n    \"type\": \"number\",\n    \"inclusive\": true,\n    \"exact\": false,\n    \"message\": \"Number must be less than or equal to 1\",\n    \"path\": [\n      \"prediction\",\n      \"x\"\n    ]\n  }\n]","status":"Killed","static":false,"testsCompleted":3,"killedBy":["13"],"coveredBy":["11","12","13","17"],"location":{"end":{"column":41,"line":119},"start":{"column":23,"line":119}}},{"id":"159","mutatorName":"MethodExpression","replacement":"Math.min(0, Math.min(1, predY))","status":"Survived","static":false,"testsCompleted":4,"coveredBy":["11","12","13","17"],"location":{"end":{"column":42,"line":120},"start":{"column":11,"line":120}}},{"id":"160","mutatorName":"MethodExpression","replacement":"Math.max(1, predY)","status":"Survived","static":false,"testsCompleted":4,"coveredBy":["11","12","13","17"],"location":{"end":{"column":41,"line":120},"start":{"column":23,"line":120}}},{"id":"161","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"[\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"ts\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"expected\": \"'left' | 'right' | 'none'\",\n    \"received\": \"undefined\",\n    \"code\": \"invalid_type\",\n    \"path\": [\n      \"handId\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"boolean\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"trackingOk\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"boolean\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"palmFacing\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"expected\": \"'Open_Palm' | 'Pointing_Up' | 'Victory' | 'Thumb_Up' | 'Thumb_Down' | 'Closed_Fist' | 'ILoveYou' | 'None'\",\n    \"received\": \"undefined\",\n    \"code\": \"invalid_type\",\n    \"path\": [\n      \"label\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"confidence\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"object\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"position\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"object\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"velocity\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"object\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"prediction\"\n    ],\n    \"message\": \"Required\"\n  }\n]","status":"Killed","static":false,"testsCompleted":1,"killedBy":["11"],"coveredBy":["11","12","13","17"],"location":{"end":{"column":4,"line":132},"start":{"column":36,"line":122}}},{"id":"162","mutatorName":"BooleanLiteral","replacement":"false","status":"Survived","static":false,"testsCompleted":4,"coveredBy":["11","12","13","17"],"location":{"end":{"column":20,"line":125},"start":{"column":16,"line":125}}},{"id":"163","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"[\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"position\",\n      \"x\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"position\",\n      \"y\"\n    ],\n    \"message\": \"Required\"\n  }\n]","status":"Killed","static":false,"testsCompleted":1,"killedBy":["11"],"coveredBy":["11","12","13","17"],"location":{"end":{"column":22,"line":129},"start":{"column":14,"line":129}}},{"id":"164","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"[\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"velocity\",\n      \"x\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"velocity\",\n      \"y\"\n    ],\n    \"message\": \"Required\"\n  }\n]","status":"Killed","static":false,"testsCompleted":1,"killedBy":["11"],"coveredBy":["11","12","13","17"],"location":{"end":{"column":44,"line":130},"start":{"column":14,"line":130}}},{"id":"165","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"[\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"prediction\",\n      \"x\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"prediction\",\n      \"y\"\n    ],\n    \"message\": \"Required\"\n  }\n]","status":"Killed","static":false,"testsCompleted":1,"killedBy":["11"],"coveredBy":["11","12","13","17"],"location":{"end":{"column":38,"line":131},"start":{"column":16,"line":131}}},{"id":"166","mutatorName":"BlockStatement","replacement":"{}","status":"Survived","static":false,"testsCompleted":2,"coveredBy":["12","13"],"location":{"end":{"column":3,"line":145},"start":{"column":16,"line":135}}}],"source":"/**\r\n * Predictive Smoother - IMPLEMENTED (TDD GREEN Phase)\r\n *\r\n * Gen87.X3 | Phase: VALIDATE (V) | TDD GREEN\r\n *\r\n * Reference: Dead Reckoning / Motion Prediction\r\n * Used in gaming for lag compensation and in touch interfaces for\r\n * reducing perceived latency.\r\n *\r\n * Predicts future position based on:\r\n * - Current position\r\n * - Current velocity\r\n * - Optional: acceleration (jerk-aware prediction)\r\n *\r\n * Formula: predicted = position + velocity * lookAhead + 0.5 * acceleration * lookAhead\r\n *\r\n * TRL 9: Standard technique in game networking, touch interfaces, robotics\r\n */\r\n\r\nimport type { SmoothedFrame, SmootherPort } from '../contracts/ports.js';\r\nimport type { SensorFrame } from '../contracts/schemas.js';\r\nimport { SmoothedFrameSchema } from '../contracts/schemas.js';\r\n\r\nexport interface PredictiveConfig {\r\n\t/** How far ahead to predict (ms) */\r\n\tpredictionMs: number;\r\n\t/** Whether to use physics-based prediction */\r\n\tusePhysics: boolean;\r\n\t/** Velocity smoothing factor (0-1) - optional */\r\n\tvelocitySmoothing?: number;\r\n}\r\n\r\n/**\r\n * PredictiveSmoother - Motion Prediction\r\n *\r\n * Predicts future position using velocity (and optionally acceleration).\r\n * Reduces perceived latency by rendering where the cursor WILL be.\r\n */\r\nexport class PredictiveSmoother implements SmootherPort {\r\n\tprivate config: PredictiveConfig;\r\n\tprivate lastX: number | null = null;\r\n\tprivate lastY: number | null = null;\r\n\tprivate lastTs: number | null = null;\r\n\tprivate velX = 0;\r\n\tprivate velY = 0;\r\n\tprivate lastVelX = 0;\r\n\tprivate lastVelY = 0;\r\n\tprivate accelX = 0;\r\n\tprivate accelY = 0;\r\n\r\n\tconstructor(config: PredictiveConfig) {\r\n\t\tthis.config = config;\r\n\t}\r\n\r\n\tsmooth(frame: SensorFrame): SmoothedFrame {\r\n\t\t// If no valid tracking, pass through with null position\r\n\t\tif (!frame.trackingOk || !frame.indexTip) {\r\n\t\t\tthis.reset();\r\n\t\t\treturn SmoothedFrameSchema.parse({\r\n\t\t\t\tts: frame.ts,\r\n\t\t\t\thandId: frame.handId,\r\n\t\t\t\ttrackingOk: false,\r\n\t\t\t\tpalmFacing: frame.palmFacing,\r\n\t\t\t\tlabel: frame.label,\r\n\t\t\t\tconfidence: frame.confidence,\r\n\t\t\t\tposition: null,\r\n\t\t\t\tvelocity: null,\r\n\t\t\t\tprediction: null,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// Clamp position to [0,1] for schema validation\r\n\t\tconst x = Math.max(0, Math.min(1, frame.indexTip.x));\r\n\t\tconst y = Math.max(0, Math.min(1, frame.indexTip.y));\r\n\r\n\t\t// Calculate velocity\r\n\t\tif (this.lastX !== null && this.lastY !== null && this.lastTs !== null) {\r\n\t\t\tlet dt = (frame.ts - this.lastTs) / 1000;\r\n\t\t\tif (dt <= 0) dt = 1 / 60;\r\n\r\n\t\t\t// Raw velocity\r\n\t\t\tconst rawVelX = (x - this.lastX) / dt;\r\n\t\t\tconst rawVelY = (y - this.lastY) / dt;\r\n\r\n\t\t\t// Smooth velocity with exponential moving average\r\n\t\t\tconst alpha = this.config.velocitySmoothing ?? 0.5;\r\n\t\t\tthis.velX = alpha * rawVelX + (1 - alpha) * this.velX;\r\n\t\t\tthis.velY = alpha * rawVelY + (1 - alpha) * this.velY;\r\n\r\n\t\t\t// Calculate acceleration if enabled\r\n\t\t\tif (this.config.useAcceleration) {\r\n\t\t\t\tconst rawAccelX = (this.velX - this.lastVelX) / dt;\r\n\t\t\t\tconst rawAccelY = (this.velY - this.lastVelY) / dt;\r\n\t\t\t\tthis.accelX = alpha * rawAccelX + (1 - alpha) * this.accelX;\r\n\t\t\t\tthis.accelY = alpha * rawAccelY + (1 - alpha) * this.accelY;\r\n\t\t\t}\r\n\r\n\t\t\tthis.lastVelX = this.velX;\r\n\t\t\tthis.lastVelY = this.velY;\r\n\t\t}\r\n\r\n\t\t// Store current values for next frame\r\n\t\tthis.lastX = x;\r\n\t\tthis.lastY = y;\r\n\t\tthis.lastTs = frame.ts;\r\n\r\n\t\t// Calculate prediction\r\n\t\tconst lookAhead = this.config.predictionMs / 1000;\r\n\t\tlet predX = x + this.velX * lookAhead;\r\n\t\tlet predY = y + this.velY * lookAhead;\r\n\r\n\t\t// Add acceleration term if physics enabled\r\n\t\tif (this.config.usePhysics) {\r\n\t\t\tpredX += 0.5 * this.accelX * lookAhead * lookAhead;\r\n\t\t\tpredY += 0.5 * this.accelY * lookAhead * lookAhead;\r\n\t\t}\r\n\r\n\t\t// Clamp prediction to [0,1]\r\n\t\tpredX = Math.max(0, Math.min(1, predX));\r\n\t\tpredY = Math.max(0, Math.min(1, predY));\r\n\r\n\t\treturn SmoothedFrameSchema.parse({\r\n\t\t\tts: frame.ts,\r\n\t\t\thandId: frame.handId,\r\n\t\t\ttrackingOk: true,\r\n\t\t\tpalmFacing: frame.palmFacing,\r\n\t\t\tlabel: frame.label,\r\n\t\t\tconfidence: frame.confidence,\r\n\t\t\tposition: { x, y },\r\n\t\t\tvelocity: { x: this.velX, y: this.velY },\r\n\t\t\tprediction: { x: predX, y: predY },\r\n\t\t});\r\n\t}\r\n\r\n\treset(): void {\r\n\t\tthis.lastX = null;\r\n\t\tthis.lastY = null;\r\n\t\tthis.lastTs = null;\r\n\t\tthis.velX = 0;\r\n\t\tthis.velY = 0;\r\n\t\tthis.lastVelX = 0;\r\n\t\tthis.lastVelY = 0;\r\n\t\tthis.accelX = 0;\r\n\t\tthis.accelY = 0;\r\n\t}\r\n\r\n\tsetParams(params: Partial<PredictiveConfig>): void {\r\n\t\tif (params.predictionMs !== undefined) this.config.predictionMs = params.predictionMs;\r\n\t\tif (params.velocitySmoothing !== undefined)\r\n\t\t\tthis.config.velocitySmoothing = params.velocitySmoothing;\r\n\t\tif (params.usePhysics !== undefined) this.config.usePhysics = params.usePhysics;\r\n\t}\r\n}\r\n"},"sandbox/src/smoothers/quad-cursor-pipeline.ts":{"language":"typescript","mutants":[{"id":"193","mutatorName":"BlockStatement","replacement":"{}","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":3,"line":112},"start":{"column":16,"line":107}}},{"id":"194","mutatorName":"OptionalChaining","replacement":"this.euro.reset","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":19,"line":109},"start":{"column":3,"line":109}}},{"id":"195","mutatorName":"OptionalChaining","replacement":"this.spring.reset","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":21,"line":110},"start":{"column":3,"line":110}}},{"id":"196","mutatorName":"OptionalChaining","replacement":"this.predictive.reset","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":25,"line":111},"start":{"column":3,"line":111}}},{"id":"177","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Cannot read properties of undefined (reading 'smooth')","status":"Killed","static":false,"testsCompleted":1,"killedBy":["17"],"coveredBy":["17","18"],"location":{"end":{"column":3,"line":64},"start":{"column":40,"line":59}}},{"id":"178","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Cannot read properties of undefined (reading 'raw')","status":"Killed","static":false,"testsCompleted":1,"killedBy":["17"],"coveredBy":["17","18"],"location":{"end":{"column":3,"line":104},"start":{"column":48,"line":67}}},{"id":"179","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"actual value must be number or bigint, received \"undefined\"","status":"Killed","static":false,"testsCompleted":1,"killedBy":["17"],"coveredBy":["17","18"],"location":{"end":{"column":85,"line":70},"start":{"column":35,"line":70}}},{"id":"180","mutatorName":"ConditionalExpression","replacement":"true","status":"Survived","static":false,"testsCompleted":2,"coveredBy":["17","18"],"location":{"end":{"column":16,"line":74},"start":{"column":7,"line":74}}},{"id":"181","mutatorName":"ConditionalExpression","replacement":"false","statusReason":"Cannot read properties of null (reading 'x')","status":"Killed","static":false,"testsCompleted":1,"killedBy":["17"],"coveredBy":["17","18"],"location":{"end":{"column":16,"line":74},"start":{"column":7,"line":74}}},{"id":"182","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Cannot read properties of null (reading 'x')","status":"Killed","static":false,"testsCompleted":1,"killedBy":["17"],"coveredBy":["17","18"],"location":{"end":{"column":4,"line":77},"start":{"column":18,"line":74}}},{"id":"183","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"actual value must be number or bigint, received \"undefined\"","status":"Killed","static":false,"testsCompleted":1,"killedBy":["17"],"coveredBy":["17","18"],"location":{"end":{"column":84,"line":76},"start":{"column":32,"line":76}}},{"id":"184","mutatorName":"ConditionalExpression","replacement":"true","statusReason":"Cannot read properties of null (reading 'smooth')","status":"Killed","static":false,"testsCompleted":2,"killedBy":["18"],"coveredBy":["17","18"],"location":{"end":{"column":18,"line":81},"start":{"column":7,"line":81}}},{"id":"185","mutatorName":"ConditionalExpression","replacement":"false","statusReason":"Cannot read properties of null (reading 'x')","status":"Killed","static":false,"testsCompleted":1,"killedBy":["17"],"coveredBy":["17","18"],"location":{"end":{"column":18,"line":81},"start":{"column":7,"line":81}}},{"id":"186","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Cannot read properties of null (reading 'x')","status":"Killed","static":false,"testsCompleted":1,"killedBy":["17"],"coveredBy":["17"],"location":{"end":{"column":4,"line":86},"start":{"column":20,"line":81}}},{"id":"187","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"actual value must be number or bigint, received \"undefined\"","status":"Killed","static":false,"testsCompleted":1,"killedBy":["17"],"coveredBy":["17"],"location":{"end":{"column":63,"line":84},"start":{"column":7,"line":84}}},{"id":"188","mutatorName":"ConditionalExpression","replacement":"true","statusReason":"Cannot read properties of null (reading 'smooth')","status":"Killed","static":false,"testsCompleted":2,"killedBy":["18"],"coveredBy":["17","18"],"location":{"end":{"column":22,"line":90},"start":{"column":7,"line":90}}},{"id":"189","mutatorName":"ConditionalExpression","replacement":"false","statusReason":"Cannot read properties of null (reading 'x')","status":"Killed","static":false,"testsCompleted":1,"killedBy":["17"],"coveredBy":["17","18"],"location":{"end":{"column":22,"line":90},"start":{"column":7,"line":90}}},{"id":"190","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Cannot read properties of null (reading 'x')","status":"Killed","static":false,"testsCompleted":1,"killedBy":["17"],"coveredBy":["17"],"location":{"end":{"column":4,"line":95},"start":{"column":24,"line":90}}},{"id":"191","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"actual value must be number or bigint, received \"undefined\"","status":"Killed","static":false,"testsCompleted":1,"killedBy":["17"],"coveredBy":["17"],"location":{"end":{"column":63,"line":93},"start":{"column":7,"line":93}}},{"id":"192","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"expected undefined to be defined","status":"Killed","static":false,"testsCompleted":1,"killedBy":["17"],"coveredBy":["17","18"],"location":{"end":{"column":4,"line":103},"start":{"column":10,"line":97}}}],"source":"/**\r\n * Quad Cursor Pipeline - 4-Stage Output - IMPLEMENTED (TDD GREEN Phase)\r\n *\r\n * Gen87.X3 | Phase: VALIDATE (V) | TDD GREEN\r\n *\r\n * Outputs 4 cursor positions simultaneously per frame:\r\n *\r\n * 1. Raw: Unprocessed MediaPipe fingertip position\r\n * 2. Euro: 1 Filter output (snappy/smooth adaptive)\r\n * 3. Spring: Spring-damper smoothed (natural inertia)\r\n * 4. Predictive: Motion-predicted position (reduced latency)\r\n *\r\n * This allows:\r\n * - Visual comparison of different smoothing strategies\r\n * - Runtime selection of preferred cursor\r\n * - A/B testing for user preference studies\r\n * - Debugging pipeline behavior\r\n *\r\n * Each stage can be independently enabled/disabled via null.\r\n */\r\n\r\nimport { PassthroughSmootherAdapter } from '../adapters/one-euro.adapter.js';\r\nimport type { SmootherPort } from '../contracts/ports.js';\r\nimport type { SensorFrame } from '../contracts/schemas.js';\r\n\r\nexport interface QuadCursorOutput {\r\n\t/** Raw MediaPipe position (no smoothing) */\r\n\traw: { x: number; y: number } | null;\r\n\t/** 1 Filter smoothed position */\r\n\teuro: { x: number; y: number } | null;\r\n\t/** Spring-damper physics position */\r\n\tspring: { x: number; y: number } | null;\r\n\t/** Motion-predicted position */\r\n\tpredictive: { x: number; y: number } | null;\r\n\t/** Timestamp of this quad output */\r\n\tts: number;\r\n}\r\n\r\nexport interface QuadCursorConfig {\r\n\t/** 1 smoother (null to disable) */\r\n\teuro: SmootherPort | null;\r\n\t/** Spring-damper smoother (null to disable) */\r\n\tspring: SmootherPort | null;\r\n\t/** Predictive smoother (null to disable) */\r\n\tpredictive: SmootherPort | null;\r\n}\r\n\r\n/**\r\n * QuadCursorPipeline - 4-Stage Cursor Output\r\n *\r\n * Runs frame through all 4 smoothers simultaneously.\r\n */\r\nexport class QuadCursorPipeline {\r\n\tprivate passthrough: PassthroughSmootherAdapter;\r\n\tprivate euro: SmootherPort | null;\r\n\tprivate spring: SmootherPort | null;\r\n\tprivate predictive: SmootherPort | null;\r\n\r\n\tconstructor(config: QuadCursorConfig) {\r\n\t\tthis.passthrough = new PassthroughSmootherAdapter();\r\n\t\tthis.euro = config.euro;\r\n\t\tthis.spring = config.spring;\r\n\t\tthis.predictive = config.predictive;\r\n\t}\r\n\r\n\t/** Process a frame and return all 4 cursor positions */\r\n\tprocess(frame: SensorFrame): QuadCursorOutput {\r\n\t\t// Raw is always available via passthrough\r\n\t\tconst rawFrame = this.passthrough.smooth(frame);\r\n\t\tconst raw = rawFrame.position ? { x: rawFrame.position.x, y: rawFrame.position.y } : null;\r\n\r\n\t\t// Euro (1 filter)\r\n\t\tlet euro: { x: number; y: number } | null = null;\r\n\t\tif (this.euro) {\r\n\t\t\tconst euroFrame = this.euro.smooth(frame);\r\n\t\t\teuro = euroFrame.position ? { x: euroFrame.position.x, y: euroFrame.position.y } : null;\r\n\t\t}\r\n\r\n\t\t// Spring-damper\r\n\t\tlet spring: { x: number; y: number } | null = null;\r\n\t\tif (this.spring) {\r\n\t\t\tconst springFrame = this.spring.smooth(frame);\r\n\t\t\tspring = springFrame.position\r\n\t\t\t\t? { x: springFrame.position.x, y: springFrame.position.y }\r\n\t\t\t\t: null;\r\n\t\t}\r\n\r\n\t\t// Predictive\r\n\t\tlet predictive: { x: number; y: number } | null = null;\r\n\t\tif (this.predictive) {\r\n\t\t\tconst predFrame = this.predictive.smooth(frame);\r\n\t\t\tpredictive = predFrame.prediction\r\n\t\t\t\t? { x: predFrame.prediction.x, y: predFrame.prediction.y }\r\n\t\t\t\t: null;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\traw,\r\n\t\t\teuro,\r\n\t\t\tspring,\r\n\t\t\tpredictive,\r\n\t\t\tts: frame.ts,\r\n\t\t};\r\n\t}\r\n\r\n\t/** Reset all smoothers */\r\n\treset(): void {\r\n\t\tthis.passthrough.reset();\r\n\t\tthis.euro?.reset();\r\n\t\tthis.spring?.reset();\r\n\t\tthis.predictive?.reset();\r\n\t}\r\n}\r\n"},"sandbox/src/smoothers/smoother-chain.ts":{"language":"typescript","mutants":[{"id":"203","mutatorName":"BlockStatement","replacement":"{}","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":4,"line":50},"start":{"column":36,"line":37}}},{"id":"204","mutatorName":"ObjectLiteral","replacement":"{}","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":5,"line":49},"start":{"column":37,"line":39}}},{"id":"205","mutatorName":"ObjectLiteral","replacement":"{}","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":76,"line":46},"start":{"column":32,"line":46}}},{"id":"215","mutatorName":"BlockStatement","replacement":"{}","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":3,"line":91},"start":{"column":44,"line":89}}},{"id":"216","mutatorName":"BlockStatement","replacement":"{}","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":3,"line":98},"start":{"column":38,"line":94}}},{"id":"217","mutatorName":"ConditionalExpression","replacement":"true","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":50,"line":95},"start":{"column":7,"line":95}}},{"id":"218","mutatorName":"ConditionalExpression","replacement":"false","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":50,"line":95},"start":{"column":7,"line":95}}},{"id":"219","mutatorName":"LogicalOperator","replacement":"index >= 0 || index < this.smoothers.length","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":50,"line":95},"start":{"column":7,"line":95}}},{"id":"220","mutatorName":"ConditionalExpression","replacement":"true","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":17,"line":95},"start":{"column":7,"line":95}}},{"id":"221","mutatorName":"EqualityOperator","replacement":"index > 0","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":17,"line":95},"start":{"column":7,"line":95}}},{"id":"222","mutatorName":"EqualityOperator","replacement":"index < 0","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":17,"line":95},"start":{"column":7,"line":95}}},{"id":"223","mutatorName":"ConditionalExpression","replacement":"true","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":50,"line":95},"start":{"column":21,"line":95}}},{"id":"224","mutatorName":"EqualityOperator","replacement":"index <= this.smoothers.length","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":50,"line":95},"start":{"column":21,"line":95}}},{"id":"225","mutatorName":"EqualityOperator","replacement":"index >= this.smoothers.length","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":50,"line":95},"start":{"column":21,"line":95}}},{"id":"226","mutatorName":"BlockStatement","replacement":"{}","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":4,"line":97},"start":{"column":52,"line":95}}},{"id":"227","mutatorName":"BlockStatement","replacement":"{}","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":3,"line":105},"start":{"column":63,"line":101}}},{"id":"228","mutatorName":"ConditionalExpression","replacement":"true","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":50,"line":102},"start":{"column":7,"line":102}}},{"id":"229","mutatorName":"ConditionalExpression","replacement":"false","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":50,"line":102},"start":{"column":7,"line":102}}},{"id":"230","mutatorName":"LogicalOperator","replacement":"index >= 0 || index < this.smoothers.length","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":50,"line":102},"start":{"column":7,"line":102}}},{"id":"231","mutatorName":"ConditionalExpression","replacement":"true","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":17,"line":102},"start":{"column":7,"line":102}}},{"id":"232","mutatorName":"EqualityOperator","replacement":"index > 0","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":17,"line":102},"start":{"column":7,"line":102}}},{"id":"233","mutatorName":"EqualityOperator","replacement":"index < 0","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":17,"line":102},"start":{"column":7,"line":102}}},{"id":"234","mutatorName":"ConditionalExpression","replacement":"true","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":50,"line":102},"start":{"column":21,"line":102}}},{"id":"235","mutatorName":"EqualityOperator","replacement":"index <= this.smoothers.length","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":50,"line":102},"start":{"column":21,"line":102}}},{"id":"236","mutatorName":"EqualityOperator","replacement":"index >= this.smoothers.length","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":50,"line":102},"start":{"column":21,"line":102}}},{"id":"237","mutatorName":"BlockStatement","replacement":"{}","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":4,"line":104},"start":{"column":52,"line":102}}},{"id":"238","mutatorName":"BlockStatement","replacement":"{}","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":3,"line":110},"start":{"column":22,"line":108}}},{"id":"239","mutatorName":"BlockStatement","replacement":"{}","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":3,"line":115},"start":{"column":33,"line":113}}},{"id":"240","mutatorName":"ArrayDeclaration","replacement":"[]","status":"NoCoverage","static":false,"coveredBy":[],"location":{"end":{"column":29,"line":114},"start":{"column":10,"line":114}}},{"id":"197","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Cannot read properties of undefined (reading 'length')","status":"Killed","static":false,"testsCompleted":1,"killedBy":["14"],"coveredBy":["14","15","16"],"location":{"end":{"column":3,"line":34},"start":{"column":41,"line":32}}},{"id":"198","mutatorName":"ArrayDeclaration","replacement":"[]","status":"Survived","static":false,"testsCompleted":3,"coveredBy":["14","15","16"],"location":{"end":{"column":34,"line":33},"start":{"column":20,"line":33}}},{"id":"199","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Cannot read properties of undefined (reading 'position')","status":"Killed","static":false,"testsCompleted":1,"killedBy":["14"],"coveredBy":["14","15","16"],"location":{"end":{"column":3,"line":75},"start":{"column":44,"line":36}}},{"id":"200","mutatorName":"ConditionalExpression","replacement":"true","status":"Survived","static":false,"testsCompleted":3,"coveredBy":["14","15","16"],"location":{"end":{"column":34,"line":37},"start":{"column":7,"line":37}}},{"id":"201","mutatorName":"ConditionalExpression","replacement":"false","status":"Survived","static":false,"testsCompleted":3,"coveredBy":["14","15","16"],"location":{"end":{"column":34,"line":37},"start":{"column":7,"line":37}}},{"id":"202","mutatorName":"EqualityOperator","replacement":"this.smoothers.length !== 0","status":"Survived","static":false,"testsCompleted":3,"coveredBy":["14","15","16"],"location":{"end":{"column":34,"line":37},"start":{"column":7,"line":37}}},{"id":"206","mutatorName":"ConditionalExpression","replacement":"false","status":"Survived","static":false,"testsCompleted":3,"coveredBy":["14","15","16"],"location":{"end":{"column":44,"line":57},"start":{"column":19,"line":57}}},{"id":"207","mutatorName":"EqualityOperator","replacement":"i <= this.smoothers.length","statusReason":"Cannot read properties of undefined (reading 'smooth')","status":"Killed","static":false,"testsCompleted":1,"killedBy":["14"],"coveredBy":["14","15","16"],"location":{"end":{"column":44,"line":57},"start":{"column":19,"line":57}}},{"id":"208","mutatorName":"EqualityOperator","replacement":"i >= this.smoothers.length","statusReason":"Cannot read properties of undefined (reading 'smooth')","status":"Killed","static":false,"testsCompleted":2,"killedBy":["15"],"coveredBy":["14","15","16"],"location":{"end":{"column":44,"line":57},"start":{"column":19,"line":57}}},{"id":"209","mutatorName":"UpdateOperator","replacement":"i--","statusReason":"[\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"nan\",\n    \"path\": [\n      \"position\",\n      \"x\"\n    ],\n    \"message\": \"Expected number, received nan\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"nan\",\n    \"path\": [\n      \"position\",\n      \"y\"\n    ],\n    \"message\": \"Expected number, received nan\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"nan\",\n    \"path\": [\n      \"prediction\",\n      \"x\"\n    ],\n    \"message\": \"Expected number, received nan\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"nan\",\n    \"path\": [\n      \"prediction\",\n      \"y\"\n    ],\n    \"message\": \"Expected number, received nan\"\n  }\n]","status":"Killed","static":false,"testsCompleted":1,"killedBy":["14"],"coveredBy":["14","15","16"],"location":{"end":{"column":49,"line":57},"start":{"column":46,"line":57}}},{"id":"210","mutatorName":"BlockStatement","replacement":"{}","status":"Survived","static":false,"testsCompleted":3,"coveredBy":["14","15","16"],"location":{"end":{"column":4,"line":72},"start":{"column":51,"line":57}}},{"id":"211","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"[\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"ts\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"expected\": \"'left' | 'right' | 'none'\",\n    \"received\": \"undefined\",\n    \"code\": \"invalid_type\",\n    \"path\": [\n      \"handId\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"boolean\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"palmFacing\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"expected\": \"'Open_Palm' | 'Pointing_Up' | 'Victory' | 'Thumb_Up' | 'Thumb_Down' | 'Closed_Fist' | 'ILoveYou' | 'None'\",\n    \"received\": \"undefined\",\n    \"code\": \"invalid_type\",\n    \"path\": [\n      \"label\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"confidence\"\n    ],\n    \"message\": \"Required\"\n  }\n]","status":"Killed","static":false,"testsCompleted":1,"killedBy":["14"],"coveredBy":["14","15","16"],"location":{"end":{"column":5,"line":69},"start":{"column":36,"line":59}}},{"id":"212","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"[\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"nan\",\n    \"path\": [\n      \"position\",\n      \"x\"\n    ],\n    \"message\": \"Expected number, received nan\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"nan\",\n    \"path\": [\n      \"position\",\n      \"y\"\n    ],\n    \"message\": \"Expected number, received nan\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"nan\",\n    \"path\": [\n      \"velocity\",\n      \"x\"\n    ],\n    \"message\": \"Expected number, received nan\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"nan\",\n    \"path\": [\n      \"velocity\",\n      \"y\"\n    ],\n    \"message\": \"Expected number, received nan\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"nan\",\n    \"path\": [\n      \"prediction\",\n      \"x\"\n    ],\n    \"message\": \"Expected number, received nan\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"nan\",\n    \"path\": [\n      \"prediction\",\n      \"y\"\n    ],\n    \"message\": \"Expected number, received nan\"\n  }\n]","status":"Killed","static":false,"testsCompleted":1,"killedBy":["14"],"coveredBy":["14","15","16"],"location":{"end":{"column":75,"line":67},"start":{"column":8,"line":67}}},{"id":"213","mutatorName":"BlockStatement","replacement":"{}","statusReason":"expected 1 to be close to 0.9, received difference is 0.09999999999999998, but expected 0.05","status":"Killed","static":false,"testsCompleted":1,"killedBy":["16"],"coveredBy":["16"],"location":{"end":{"column":3,"line":81},"start":{"column":16,"line":77}}},{"id":"214","mutatorName":"BlockStatement","replacement":"{}","statusReason":"expected 1 to be close to 0.9, received difference is 0.09999999999999998, but expected 0.05","status":"Killed","static":false,"testsCompleted":1,"killedBy":["16"],"coveredBy":["16"],"location":{"end":{"column":4,"line":80},"start":{"column":42,"line":78}}},{"id":"241","mutatorName":"BlockStatement","replacement":"{}","statusReason":"[\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"nan\",\n    \"path\": [\n      \"position\",\n      \"x\"\n    ],\n    \"message\": \"Expected number, received nan\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"nan\",\n    \"path\": [\n      \"position\",\n      \"y\"\n    ],\n    \"message\": \"Expected number, received nan\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"nan\",\n    \"path\": [\n      \"prediction\",\n      \"x\"\n    ],\n    \"message\": \"Expected number, received nan\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"nan\",\n    \"path\": [\n      \"prediction\",\n      \"y\"\n    ],\n    \"message\": \"Expected number, received nan\"\n  }\n]","status":"Killed","static":false,"testsCompleted":1,"killedBy":["15"],"coveredBy":["15"],"location":{"end":{"column":3,"line":125},"start":{"column":48,"line":118}}},{"id":"242","mutatorName":"BlockStatement","replacement":"{}","statusReason":"[\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"nan\",\n    \"path\": [\n      \"position\",\n      \"x\"\n    ],\n    \"message\": \"Expected number, received nan\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"nan\",\n    \"path\": [\n      \"position\",\n      \"y\"\n    ],\n    \"message\": \"Expected number, received nan\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"nan\",\n    \"path\": [\n      \"prediction\",\n      \"x\"\n    ],\n    \"message\": \"Expected number, received nan\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"nan\",\n    \"path\": [\n      \"prediction\",\n      \"y\"\n    ],\n    \"message\": \"Expected number, received nan\"\n  }\n]","status":"Killed","static":false,"testsCompleted":1,"killedBy":["15"],"coveredBy":["15"],"location":{"end":{"column":4,"line":123},"start":{"column":37,"line":121}}},{"id":"243","mutatorName":"ArrayDeclaration","replacement":"[]","status":"Survived","static":false,"testsCompleted":1,"coveredBy":["15"],"location":{"end":{"column":34,"line":124},"start":{"column":20,"line":124}}}],"source":"/**\r\n * Smoother Chain - Composable Pipeline - IMPLEMENTED (TDD GREEN Phase)\r\n *\r\n * Gen87.X3 | Phase: VALIDATE (V) | TDD GREEN\r\n *\r\n * Implements the Chain of Responsibility pattern for smoothers.\r\n * Allows composing multiple smoothers in sequence:\r\n *\r\n * Raw  1 Filter  Spring-Damper  Predictive  Output\r\n *\r\n * Each smoother in the chain processes the output of the previous one,\r\n * enabling flexible pipeline configurations.\r\n *\r\n * HEXAGONAL CDD: SmootherChain itself implements SmootherPort,\r\n * making the composition transparent to consumers.\r\n *\r\n * TRL 9: Chain of Responsibility is a Gang of Four design pattern\r\n */\r\n\r\nimport type { SmoothedFrame, SmootherPort } from '../contracts/ports.js';\r\nimport type { SensorFrame } from '../contracts/schemas.js';\r\nimport { SmoothedFrameSchema } from '../contracts/schemas.js';\r\n\r\n/**\r\n * SmootherChain - Composable Smoother Pipeline\r\n *\r\n * Chain of smoothers that process frames in sequence.\r\n */\r\nexport class SmootherChain implements SmootherPort {\r\n\tprivate smoothers: SmootherPort[];\r\n\r\n\tconstructor(smoothers: SmootherPort[]) {\r\n\t\tthis.smoothers = [...smoothers];\r\n\t}\r\n\r\n\tsmooth(frame: SensorFrame): SmoothedFrame {\r\n\t\tif (this.smoothers.length === 0) {\r\n\t\t\t// Empty chain - return pass-through\r\n\t\t\treturn SmoothedFrameSchema.parse({\r\n\t\t\t\tts: frame.ts,\r\n\t\t\t\thandId: frame.handId,\r\n\t\t\t\ttrackingOk: frame.trackingOk,\r\n\t\t\t\tpalmFacing: frame.palmFacing,\r\n\t\t\t\tlabel: frame.label,\r\n\t\t\t\tconfidence: frame.confidence,\r\n\t\t\t\tposition: frame.indexTip ? { x: frame.indexTip.x, y: frame.indexTip.y } : null,\r\n\t\t\t\tvelocity: null,\r\n\t\t\t\tprediction: null,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// Run first smoother with sensor frame\r\n\t\tlet result = this.smoothers[0].smooth(frame);\r\n\r\n\t\t// Chain through remaining smoothers\r\n\t\t// Each smoother receives the previous output converted to SensorFrame\r\n\t\tfor (let i = 1; i < this.smoothers.length; i++) {\r\n\t\t\t// Convert SmoothedFrame back to SensorFrame for chaining\r\n\t\t\tconst chainFrame: SensorFrame = {\r\n\t\t\t\tts: result.ts,\r\n\t\t\t\thandId: result.handId,\r\n\t\t\t\ttrackingOk: result.trackingOk,\r\n\t\t\t\tpalmFacing: result.palmFacing,\r\n\t\t\t\tlabel: result.label,\r\n\t\t\t\tconfidence: result.confidence,\r\n\t\t\t\tindexTip: result.position\r\n\t\t\t\t\t? { x: result.position.x, y: result.position.y, z: 0, visibility: 1 }\r\n\t\t\t\t\t: undefined,\r\n\t\t\t};\r\n\r\n\t\t\tresult = this.smoothers[i].smooth(chainFrame);\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\treset(): void {\r\n\t\tfor (const smoother of this.smoothers) {\r\n\t\t\tsmoother.reset();\r\n\t\t}\r\n\t}\r\n\r\n\tsetParams(_params: Record<string, unknown>): void {\r\n\t\t// Chain doesn't have its own params - this is a no-op\r\n\t\t// Individual smoothers can be accessed via getSmoothers()\r\n\t}\r\n\r\n\t/** Add a smoother to the end of the chain */\r\n\taddSmoother(smoother: SmootherPort): void {\r\n\t\tthis.smoothers.push(smoother);\r\n\t}\r\n\r\n\t/** Remove a smoother from the chain by index */\r\n\tremoveSmoother(index: number): void {\r\n\t\tif (index >= 0 && index < this.smoothers.length) {\r\n\t\t\tthis.smoothers.splice(index, 1);\r\n\t\t}\r\n\t}\r\n\r\n\t/** Replace a smoother at a specific index */\r\n\treplaceSmoother(index: number, smoother: SmootherPort): void {\r\n\t\tif (index >= 0 && index < this.smoothers.length) {\r\n\t\t\tthis.smoothers[index] = smoother;\r\n\t\t}\r\n\t}\r\n\r\n\t/** Get the current chain length */\r\n\tgetLength(): number {\r\n\t\treturn this.smoothers.length;\r\n\t}\r\n\r\n\t/** Get all smoothers in the chain */\r\n\tgetSmoothers(): SmootherPort[] {\r\n\t\treturn [...this.smoothers];\r\n\t}\r\n\r\n\t/** Replace all smoothers in the chain (runtime swap) */\r\n\tsetSmoothers(smoothers: SmootherPort[]): void {\r\n\t\t// Reset all new smoothers to ensure clean state\r\n\t\t// This prevents NaN from stale timestamps when reusing smoothers\r\n\t\tfor (const smoother of smoothers) {\r\n\t\t\tsmoother.reset();\r\n\t\t}\r\n\t\tthis.smoothers = [...smoothers];\r\n\t}\r\n}\r\n"},"sandbox/src/smoothers/one-euro-smoother.ts":{"language":"typescript","mutants":[{"id":"0","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Must call super constructor in derived class before accessing 'this' or returning from derived constructor","status":"Killed","static":false,"testsCompleted":1,"killedBy":["0"],"coveredBy":["0","1","2","3","4","5","14","15","16","17","18"],"location":{"end":{"column":3,"line":40},"start":{"column":37,"line":38}}},{"id":"1","mutatorName":"LogicalOperator","replacement":"config.dcutoff && 1.0","status":"Survived","static":false,"testsCompleted":11,"coveredBy":["0","1","2","3","4","5","14","15","16","17","18"],"location":{"end":{"column":61,"line":39},"start":{"column":40,"line":39}}}],"source":"/**\r\n * 1 Filter Smoother - WIRED (TDD GREEN Phase)\r\n *\r\n * Gen87.X3 | Phase: VALIDATE (V) | TDD GREEN\r\n *\r\n * Reference: Gry Casiez, Nicolas Roussel, Daniel Vogel.\r\n * \"1 Filter: A Simple Speed-based Low-pass Filter for Noisy Input in Interactive Systems\"\r\n * CHI 2012 - https://dl.acm.org/doi/10.1145/2207676.2208639\r\n *\r\n * The 1 filter is an adaptive low-pass filter that adjusts its cutoff frequency\r\n * based on the speed of the input signal. This provides:\r\n * - Low cutoff (smooth) when stationary or slow-moving\r\n * - High cutoff (snappy) when fast-moving\r\n *\r\n * TRL 9: Peer-reviewed, widely deployed in production (MediaPipe, Unity, etc.)\r\n *\r\n * VALIDATE: Re-exports the working adapter from one-euro.adapter.ts\r\n */\r\n\r\nimport { OneEuroAdapter, PassthroughSmootherAdapter } from '../adapters/one-euro.adapter.js';\r\n\r\n// Re-export config type for consumers\r\nexport interface OneEuroConfig {\r\n\t/** Minimum cutoff frequency (Hz) - lower = smoother when slow */\r\n\tmincutoff: number;\r\n\t/** Speed coefficient - higher = snappier response to fast movement */\r\n\tbeta: number;\r\n\t/** Derivative cutoff frequency (Hz) - smooths velocity estimate */\r\n\tdcutoff?: number;\r\n}\r\n\r\n/**\r\n * OneEuroSmoother - 1 Filter Implementation\r\n *\r\n * WIRED: Wraps OneEuroAdapter with config-based construction\r\n */\r\nexport class OneEuroSmoother extends OneEuroAdapter {\r\n\tconstructor(config: OneEuroConfig) {\r\n\t\tsuper(config.mincutoff, config.beta, config.dcutoff ?? 1.0);\r\n\t}\r\n}\r\n\r\n// Re-export for consumers\r\nexport { OneEuroAdapter, PassthroughSmootherAdapter };\r\n"}},"schemaVersion":"1.0","thresholds":{"high":80,"low":60,"break":50},"testFiles":{"sandbox/src/smoothers/smoother-pipeline.test.ts":{"tests":[{"id":"0","name":"OneEuroSmoother (1 Filter) implements SmootherPort interface"},{"id":"1","name":"OneEuroSmoother (1 Filter) smooth() returns valid SmoothedFrame"},{"id":"2","name":"OneEuroSmoother (1 Filter) first frame returns position equal to input (no history)"},{"id":"3","name":"OneEuroSmoother (1 Filter) smooths between consecutive positions"},{"id":"4","name":"OneEuroSmoother (1 Filter) reset() clears filter state"},{"id":"5","name":"OneEuroSmoother (1 Filter) setParams() changes filter behavior"},{"id":"6","name":"PhysicsSpringDamperSmoother implements SmootherPort interface"},{"id":"7","name":"PhysicsSpringDamperSmoother smooth() returns valid SmoothedFrame with spring physics"},{"id":"8","name":"PhysicsSpringDamperSmoother exhibits spring behavior - overshoots then settles"},{"id":"9","name":"PhysicsSpringDamperSmoother damping prevents oscillation when critically damped"},{"id":"10","name":"PredictiveSmoother implements SmootherPort interface"},{"id":"11","name":"PredictiveSmoother smooth() returns prediction field"},{"id":"12","name":"PredictiveSmoother prediction is ahead of current position when moving"},{"id":"13","name":"PredictiveSmoother prediction bounds stay within 0-1 range"},{"id":"14","name":"SmootherChain (Composable Pipeline) chains multiple smoothers in sequence"},{"id":"15","name":"SmootherChain (Composable Pipeline) allows runtime smoother swap"},{"id":"16","name":"SmootherChain (Composable Pipeline) reset() resets all smoothers in chain"},{"id":"17","name":"QuadCursorPipeline outputs 4 cursor positions per frame"},{"id":"18","name":"QuadCursorPipeline each stage can be independently disabled"}],"source":"import * as fc from 'fast-check';\r\n/**\r\n * SMOOTHER PIPELINE RED TESTS\r\n *\r\n * Gen87.X3 | Phase: INTERLOCK (I) | TDD RED\r\n *\r\n * REQUIREMENT: 4-stage cursor pipeline with swappable smoothers\r\n * 1. Raw MediaPipe fingertip\r\n * 2. 1 Filter (snappy/smooth)\r\n * 3. Physics spring-dampening cursor\r\n * 4. Predictive physics cursor\r\n *\r\n * HEXAGONAL CDD PRINCIPLE: Each smoother implements SmootherPort\r\n * and can be swapped via dependency injection.\r\n */\r\nimport { beforeEach, describe, expect, it } from 'vitest';\r\nimport type { SmootherPort } from '../contracts/ports.js';\r\nimport type { SensorFrame } from '../contracts/schemas.js';\r\n\r\n// ============================================================================\r\n// TEST FIXTURES\r\n// ============================================================================\r\n\r\n/** Create a valid SensorFrame for testing */\r\nfunction createSensorFrame(overrides?: Partial<SensorFrame>): SensorFrame {\r\n\treturn {\r\n\t\tts: 16.67,\r\n\t\thandId: 'right',\r\n\t\ttrackingOk: true,\r\n\t\tpalmFacing: true,\r\n\t\tlabel: 'Open_Palm',\r\n\t\tconfidence: 0.95,\r\n\t\tindexTip: { x: 0.5, y: 0.5, z: 0, visibility: 1 },\r\n\t\tlandmarks: null,\r\n\t\t...overrides,\r\n\t};\r\n}\r\n\r\n/** Arbitrary for SensorFrame position */\r\nconst arbPosition = fc.record({\r\n\tx: fc.double({ min: 0.001, max: 0.999, noNaN: true }),\r\n\ty: fc.double({ min: 0.001, max: 0.999, noNaN: true }),\r\n});\r\n\r\n// ============================================================================\r\n// RED TEST 1: OneEuroSmoother implements SmootherPort\r\n// ============================================================================\r\n\r\ndescribe('OneEuroSmoother (1 Filter)', () => {\r\n\t// These will FAIL until we create OneEuroSmoother class\r\n\tlet smoother: SmootherPort;\r\n\r\n\tbeforeEach(async () => {\r\n\t\t// Dynamic import to test if module exists\r\n\t\tconst { OneEuroSmoother } = await import('./one-euro-smoother.js');\r\n\t\tsmoother = new OneEuroSmoother({ mincutoff: 1.0, beta: 0.007 });\r\n\t});\r\n\r\n\tit('implements SmootherPort interface', () => {\r\n\t\texpect(smoother.smooth).toBeTypeOf('function');\r\n\t\texpect(smoother.reset).toBeTypeOf('function');\r\n\t\texpect(smoother.setParams).toBeTypeOf('function');\r\n\t});\r\n\r\n\tit('smooth() returns valid SmoothedFrame', () => {\r\n\t\tconst frame = createSensorFrame();\r\n\t\tconst result = smoother.smooth(frame);\r\n\r\n\t\texpect(result.ts).toBe(frame.ts);\r\n\t\texpect(result.position).not.toBeNull();\r\n\t\texpect(result.velocity).not.toBeNull();\r\n\t});\r\n\r\n\tit('first frame returns position equal to input (no history)', () => {\r\n\t\tsmoother.reset();\r\n\t\tconst frame = createSensorFrame({\r\n\t\t\tindexTip: { x: 0.3, y: 0.7, z: 0, visibility: 1 },\r\n\t\t});\r\n\t\tconst result = smoother.smooth(frame);\r\n\r\n\t\texpect(result.position?.x).toBeCloseTo(0.3, 2);\r\n\t\texpect(result.position?.y).toBeCloseTo(0.7, 2);\r\n\t});\r\n\r\n\tit('smooths between consecutive positions', () => {\r\n\t\tfc.assert(\r\n\t\t\tfc.property(arbPosition, arbPosition, (pos1, pos2) => {\r\n\t\t\t\tsmoother.reset();\r\n\r\n\t\t\t\tconst frame1 = createSensorFrame({\r\n\t\t\t\t\tts: 0,\r\n\t\t\t\t\tindexTip: { x: pos1.x, y: pos1.y, z: 0, visibility: 1 },\r\n\t\t\t\t});\r\n\t\t\t\tconst frame2 = createSensorFrame({\r\n\t\t\t\t\tts: 16.67,\r\n\t\t\t\t\tindexTip: { x: pos2.x, y: pos2.y, z: 0, visibility: 1 },\r\n\t\t\t\t});\r\n\r\n\t\t\t\tsmoother.smooth(frame1);\r\n\t\t\t\tconst result = smoother.smooth(frame2);\r\n\r\n\t\t\t\t// Smoothed position should be between raw positions (lag)\r\n\t\t\t\texpect(result.position).not.toBeNull();\r\n\t\t\t\t// Velocity should be calculated\r\n\t\t\t\texpect(result.velocity).not.toBeNull();\r\n\t\t\t}),\r\n\t\t);\r\n\t});\r\n\r\n\tit('reset() clears filter state', () => {\r\n\t\tconst frame1 = createSensorFrame({ ts: 0 });\r\n\t\tconst frame2 = createSensorFrame({ ts: 16.67 });\r\n\r\n\t\tsmoother.smooth(frame1);\r\n\t\tsmoother.smooth(frame2);\r\n\t\tsmoother.reset();\r\n\r\n\t\t// After reset, next frame should be treated as first frame\r\n\t\tconst frame3 = createSensorFrame({\r\n\t\t\tts: 100,\r\n\t\t\tindexTip: { x: 0.9, y: 0.1, z: 0, visibility: 1 },\r\n\t\t});\r\n\t\tconst result = smoother.smooth(frame3);\r\n\r\n\t\t// First frame after reset = no smoothing\r\n\t\texpect(result.position?.x).toBeCloseTo(0.9, 2);\r\n\t\texpect(result.position?.y).toBeCloseTo(0.1, 2);\r\n\t});\r\n\r\n\tit('setParams() changes filter behavior', () => {\r\n\t\tsmoother.reset();\r\n\r\n\t\t// High beta = more responsive to velocity\r\n\t\tsmoother.setParams(1.0, 1.0);\r\n\t\tconst frame1 = createSensorFrame({\r\n\t\t\tts: 0,\r\n\t\t\tindexTip: { x: 0, y: 0, z: 0, visibility: 1 },\r\n\t\t});\r\n\t\tconst frame2 = createSensorFrame({\r\n\t\t\tts: 16.67,\r\n\t\t\tindexTip: { x: 1, y: 1, z: 0, visibility: 1 },\r\n\t\t});\r\n\r\n\t\tsmoother.smooth(frame1);\r\n\t\tconst highBetaResult = smoother.smooth(frame2);\r\n\r\n\t\tsmoother.reset();\r\n\r\n\t\t// Low beta = more lag\r\n\t\tsmoother.setParams(1.0, 0.0);\r\n\t\tsmoother.smooth(frame1);\r\n\t\tconst lowBetaResult = smoother.smooth(frame2);\r\n\r\n\t\t// High beta should track faster (closer to target)\r\n\t\texpect(highBetaResult.position?.x).toBeGreaterThan(lowBetaResult.position!.x);\r\n\t});\r\n});\r\n\r\n// ============================================================================\r\n// RED TEST 2: PhysicsSpringDamperSmoother\r\n// ============================================================================\r\n\r\ndescribe('PhysicsSpringDamperSmoother', () => {\r\n\tlet smoother: SmootherPort;\r\n\r\n\tbeforeEach(async () => {\r\n\t\t// This will FAIL - module doesn't exist yet\r\n\t\tconst { PhysicsSpringDamperSmoother } = await import('./physics-spring-smoother.js');\r\n\t\tsmoother = new PhysicsSpringDamperSmoother({\r\n\t\t\tstiffness: 300, // Spring constant (higher = snappier)\r\n\t\t\tdamping: 20, // Damping ratio (higher = less oscillation)\r\n\t\t\tmass: 1, // Virtual mass\r\n\t\t});\r\n\t});\r\n\r\n\tit('implements SmootherPort interface', () => {\r\n\t\texpect(smoother.smooth).toBeTypeOf('function');\r\n\t\texpect(smoother.reset).toBeTypeOf('function');\r\n\t\texpect(smoother.setParams).toBeTypeOf('function');\r\n\t});\r\n\r\n\tit('smooth() returns valid SmoothedFrame with spring physics', () => {\r\n\t\tconst frame = createSensorFrame();\r\n\t\tconst result = smoother.smooth(frame);\r\n\r\n\t\texpect(result.ts).toBe(frame.ts);\r\n\t\texpect(result.position).not.toBeNull();\r\n\t\texpect(result.velocity).not.toBeNull();\r\n\t});\r\n\r\n\tit('exhibits spring behavior - overshoots then settles', () => {\r\n\t\tsmoother.reset();\r\n\r\n\t\t// Start at origin\r\n\t\tconst frame1 = createSensorFrame({\r\n\t\t\tts: 0,\r\n\t\t\tindexTip: { x: 0.5, y: 0.5, z: 0, visibility: 1 },\r\n\t\t});\r\n\t\tsmoother.smooth(frame1);\r\n\r\n\t\t// Jump to new position - spring should follow\r\n\t\tconst targetX = 0.8;\r\n\t\tconst positions: number[] = [];\r\n\r\n\t\tfor (let t = 16.67; t < 500; t += 16.67) {\r\n\t\t\tconst frame = createSensorFrame({\r\n\t\t\t\tts: t,\r\n\t\t\t\tindexTip: { x: targetX, y: 0.5, z: 0, visibility: 1 },\r\n\t\t\t});\r\n\t\t\tconst result = smoother.smooth(frame);\r\n\t\t\tpositions.push(result.position!.x);\r\n\t\t}\r\n\r\n\t\t// Should eventually converge to target\r\n\t\tconst finalPos = positions[positions.length - 1];\r\n\t\texpect(finalPos).toBeCloseTo(targetX, 1);\r\n\r\n\t\t// Should show spring dynamics (not just exponential decay)\r\n\t\t// This is the key difference from 1 filter\r\n\t});\r\n\r\n\tit('damping prevents oscillation when critically damped', async () => {\r\n\t\tconst { PhysicsSpringDamperSmoother } = await import('./physics-spring-smoother.js');\r\n\r\n\t\t// Critically damped: zeta = c / (2 * sqrt(k * m)) = 1\r\n\t\t// c = 2 * sqrt(300 * 1)  34.6\r\n\t\tconst criticallyDamped = new PhysicsSpringDamperSmoother({\r\n\t\t\tstiffness: 300,\r\n\t\t\tdamping: 34.6,\r\n\t\t\tmass: 1,\r\n\t\t});\r\n\r\n\t\tcriticallyDamped.reset();\r\n\t\tconst frame1 = createSensorFrame({\r\n\t\t\tts: 0,\r\n\t\t\tindexTip: { x: 0.2, y: 0.5, z: 0, visibility: 1 },\r\n\t\t});\r\n\t\tcriticallyDamped.smooth(frame1);\r\n\r\n\t\tconst targetX = 0.8;\r\n\t\tlet crossedTarget = 0;\r\n\r\n\t\tfor (let t = 16.67; t < 500; t += 16.67) {\r\n\t\t\tconst frame = createSensorFrame({\r\n\t\t\t\tts: t,\r\n\t\t\t\tindexTip: { x: targetX, y: 0.5, z: 0, visibility: 1 },\r\n\t\t\t});\r\n\t\t\tconst result = criticallyDamped.smooth(frame);\r\n\t\t\tif (result.position!.x > targetX) crossedTarget++;\r\n\t\t}\r\n\r\n\t\t// Critically damped should not overshoot significantly\r\n\t\texpect(crossedTarget).toBeLessThan(3);\r\n\t});\r\n});\r\n\r\n// ============================================================================\r\n// RED TEST 3: PredictiveSmoother (physics-based prediction)\r\n// ============================================================================\r\n\r\ndescribe('PredictiveSmoother', () => {\r\n\tlet smoother: SmootherPort;\r\n\r\n\tbeforeEach(async () => {\r\n\t\t// This will FAIL - module doesn't exist yet\r\n\t\tconst { PredictiveSmoother } = await import('./predictive-smoother.js');\r\n\t\tsmoother = new PredictiveSmoother({\r\n\t\t\tpredictionMs: 50, // How far ahead to predict\r\n\t\t\tusePhysics: true, // Use spring model for prediction\r\n\t\t});\r\n\t});\r\n\r\n\tit('implements SmootherPort interface', () => {\r\n\t\texpect(smoother.smooth).toBeTypeOf('function');\r\n\t\texpect(smoother.reset).toBeTypeOf('function');\r\n\t\texpect(smoother.setParams).toBeTypeOf('function');\r\n\t});\r\n\r\n\tit('smooth() returns prediction field', () => {\r\n\t\tconst frame = createSensorFrame();\r\n\t\tconst result = smoother.smooth(frame);\r\n\r\n\t\texpect(result.prediction).not.toBeNull();\r\n\t\texpect(result.prediction?.x).toBeTypeOf('number');\r\n\t\texpect(result.prediction?.y).toBeTypeOf('number');\r\n\t});\r\n\r\n\tit('prediction is ahead of current position when moving', () => {\r\n\t\tsmoother.reset();\r\n\r\n\t\t// Build up velocity moving right\r\n\t\tfor (let t = 0; t < 100; t += 16.67) {\r\n\t\t\tconst frame = createSensorFrame({\r\n\t\t\t\tts: t,\r\n\t\t\t\tindexTip: { x: 0.3 + t * 0.001, y: 0.5, z: 0, visibility: 1 },\r\n\t\t\t});\r\n\t\t\tsmoother.smooth(frame);\r\n\t\t}\r\n\r\n\t\t// Now check prediction\r\n\t\tconst frame = createSensorFrame({\r\n\t\t\tts: 100,\r\n\t\t\tindexTip: { x: 0.4, y: 0.5, z: 0, visibility: 1 },\r\n\t\t});\r\n\t\tconst result = smoother.smooth(frame);\r\n\r\n\t\t// Prediction should be ahead of current position (to the right)\r\n\t\texpect(result.prediction!.x).toBeGreaterThan(result.position!.x);\r\n\t});\r\n\r\n\tit('prediction bounds stay within 0-1 range', () => {\r\n\t\tsmoother.reset();\r\n\r\n\t\t// Moving fast toward edge\r\n\t\tfor (let t = 0; t < 100; t += 16.67) {\r\n\t\t\tconst frame = createSensorFrame({\r\n\t\t\t\tts: t,\r\n\t\t\t\tindexTip: { x: 0.9 + t * 0.002, y: 0.5, z: 0, visibility: 1 },\r\n\t\t\t});\r\n\t\t\tconst result = smoother.smooth(frame);\r\n\r\n\t\t\t// Even with high velocity, prediction should be clamped\r\n\t\t\tif (result.prediction) {\r\n\t\t\t\texpect(result.prediction.x).toBeLessThanOrEqual(1);\r\n\t\t\t\texpect(result.prediction.x).toBeGreaterThanOrEqual(0);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n});\r\n\r\n// ============================================================================\r\n// RED TEST 4: SmootherChain - Composable pipeline\r\n// ============================================================================\r\n\r\ndescribe('SmootherChain (Composable Pipeline)', () => {\r\n\tit('chains multiple smoothers in sequence', async () => {\r\n\t\t// This tests the hexagonal swappability\r\n\t\tconst { SmootherChain } = await import('./smoother-chain.js');\r\n\t\tconst { OneEuroSmoother } = await import('./one-euro-smoother.js');\r\n\t\tconst { PhysicsSpringDamperSmoother } = await import('./physics-spring-smoother.js');\r\n\r\n\t\tconst chain = new SmootherChain([\r\n\t\t\tnew OneEuroSmoother({ mincutoff: 1.0, beta: 0.007 }),\r\n\t\t\tnew PhysicsSpringDamperSmoother({ stiffness: 300, damping: 20, mass: 1 }),\r\n\t\t]);\r\n\r\n\t\tconst frame = createSensorFrame();\r\n\t\tconst result = chain.smooth(frame);\r\n\r\n\t\texpect(result.position).not.toBeNull();\r\n\t});\r\n\r\n\tit('allows runtime smoother swap', async () => {\r\n\t\tconst { SmootherChain } = await import('./smoother-chain.js');\r\n\t\tconst { OneEuroSmoother } = await import('./one-euro-smoother.js');\r\n\t\tconst { PhysicsSpringDamperSmoother } = await import('./physics-spring-smoother.js');\r\n\r\n\t\tconst euro = new OneEuroSmoother({ mincutoff: 1.0, beta: 0.007 });\r\n\t\tconst spring = new PhysicsSpringDamperSmoother({\r\n\t\t\tstiffness: 300,\r\n\t\t\tdamping: 20,\r\n\t\t\tmass: 1,\r\n\t\t});\r\n\r\n\t\tconst chain = new SmootherChain([euro]);\r\n\t\tconst frame = createSensorFrame();\r\n\r\n\t\t// Use 1 filter\r\n\t\tconst result1 = chain.smooth(frame);\r\n\t\texpect(result1).toBeDefined();\r\n\r\n\t\t// Swap to spring\r\n\t\tchain.setSmoothers([spring]);\r\n\t\tconst result2 = chain.smooth(frame);\r\n\t\texpect(result2).toBeDefined();\r\n\r\n\t\t// Chain both\r\n\t\tchain.setSmoothers([euro, spring]);\r\n\t\tconst result3 = chain.smooth(frame);\r\n\t\texpect(result3).toBeDefined();\r\n\t});\r\n\r\n\tit('reset() resets all smoothers in chain', async () => {\r\n\t\tconst { SmootherChain } = await import('./smoother-chain.js');\r\n\t\tconst { OneEuroSmoother } = await import('./one-euro-smoother.js');\r\n\t\tconst { PhysicsSpringDamperSmoother } = await import('./physics-spring-smoother.js');\r\n\r\n\t\tconst chain = new SmootherChain([\r\n\t\t\tnew OneEuroSmoother({ mincutoff: 1.0, beta: 0.007 }),\r\n\t\t\tnew PhysicsSpringDamperSmoother({ stiffness: 300, damping: 20, mass: 1 }),\r\n\t\t]);\r\n\r\n\t\t// Build up state\r\n\t\tfor (let t = 0; t < 100; t += 16.67) {\r\n\t\t\tchain.smooth(\r\n\t\t\t\tcreateSensorFrame({\r\n\t\t\t\t\tts: t,\r\n\t\t\t\t\tindexTip: { x: t * 0.01, y: 0.5, z: 0, visibility: 1 },\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tchain.reset();\r\n\r\n\t\t// After reset, first frame should not be smoothed\r\n\t\tconst frame = createSensorFrame({\r\n\t\t\tts: 200,\r\n\t\t\tindexTip: { x: 0.9, y: 0.1, z: 0, visibility: 1 },\r\n\t\t});\r\n\t\tconst result = chain.smooth(frame);\r\n\r\n\t\texpect(result.position?.x).toBeCloseTo(0.9, 1);\r\n\t});\r\n});\r\n\r\n// ============================================================================\r\n// RED TEST 5: Quad cursor output (4 positions per frame)\r\n// ============================================================================\r\n\r\ndescribe('QuadCursorPipeline', () => {\r\n\tit('outputs 4 cursor positions per frame', async () => {\r\n\t\tconst { QuadCursorPipeline } = await import('./quad-cursor-pipeline.js');\r\n\t\tconst { OneEuroSmoother } = await import('./one-euro-smoother.js');\r\n\t\tconst { PhysicsSpringDamperSmoother } = await import('./physics-spring-smoother.js');\r\n\t\tconst { PredictiveSmoother } = await import('./predictive-smoother.js');\r\n\r\n\t\tconst pipeline = new QuadCursorPipeline({\r\n\t\t\teuro: new OneEuroSmoother({ mincutoff: 1.0, beta: 0.007 }),\r\n\t\t\tspring: new PhysicsSpringDamperSmoother({ stiffness: 300, damping: 20, mass: 1 }),\r\n\t\t\tpredictive: new PredictiveSmoother({ predictionMs: 50, usePhysics: true }),\r\n\t\t});\r\n\r\n\t\tconst frame = createSensorFrame({\r\n\t\t\tindexTip: { x: 0.5, y: 0.5, z: 0, visibility: 1 },\r\n\t\t});\r\n\r\n\t\tconst result = pipeline.process(frame);\r\n\r\n\t\texpect(result.raw).toBeDefined();\r\n\t\texpect(result.euro).toBeDefined();\r\n\t\texpect(result.spring).toBeDefined();\r\n\t\texpect(result.predictive).toBeDefined();\r\n\r\n\t\t// All 4 positions in valid range\r\n\t\texpect(result.raw.x).toBeGreaterThanOrEqual(0);\r\n\t\texpect(result.euro.x).toBeGreaterThanOrEqual(0);\r\n\t\texpect(result.spring.x).toBeGreaterThanOrEqual(0);\r\n\t\texpect(result.predictive.x).toBeGreaterThanOrEqual(0);\r\n\t});\r\n\r\n\tit('each stage can be independently disabled', async () => {\r\n\t\tconst { QuadCursorPipeline } = await import('./quad-cursor-pipeline.js');\r\n\t\tconst { OneEuroSmoother } = await import('./one-euro-smoother.js');\r\n\r\n\t\t// Only 1 filter enabled\r\n\t\tconst pipeline = new QuadCursorPipeline({\r\n\t\t\teuro: new OneEuroSmoother({ mincutoff: 1.0, beta: 0.007 }),\r\n\t\t\tspring: null,\r\n\t\t\tpredictive: null,\r\n\t\t});\r\n\r\n\t\tconst frame = createSensorFrame();\r\n\t\tconst result = pipeline.process(frame);\r\n\r\n\t\texpect(result.raw).toBeDefined();\r\n\t\texpect(result.euro).toBeDefined();\r\n\t\texpect(result.spring).toBeNull();\r\n\t\texpect(result.predictive).toBeNull();\r\n\t});\r\n});\r\n\r\n// ============================================================================\r\n// Property-based test: Smoother contract compliance\r\n// ============================================================================\r\n\r\ndescribe('SmootherPort contract compliance (property-based)', () => {\r\n\t// TODO: Phase V - Enable after all SmootherPort implementations verified\r\n\tit.skip('any smoother preserves timestamp', async () => {\r\n\t\tfc.assert(\r\n\t\t\tfc.asyncProperty(arbPosition, async (pos) => {\r\n\t\t\t\t// This will test all smoothers implement the contract correctly\r\n\t\t\t\tconst { OneEuroSmoother } = await import('./one-euro-smoother.js');\r\n\t\t\t\tconst smoother = new OneEuroSmoother({ mincutoff: 1.0, beta: 0.007 });\r\n\r\n\t\t\t\tconst ts = Math.random() * 10000;\r\n\t\t\t\tconst frame = createSensorFrame({\r\n\t\t\t\t\tts,\r\n\t\t\t\t\tindexTip: { x: pos.x, y: pos.y, z: 0, visibility: 1 },\r\n\t\t\t\t});\r\n\r\n\t\t\t\tconst result = smoother.smooth(frame);\r\n\t\t\t\texpect(result.ts).toBe(ts);\r\n\t\t\t}),\r\n\t\t);\r\n\t});\r\n});\r\n"}},"projectRoot":"C:\\Dev\\active\\hfo_gen87_x3","config":{"mutate":["sandbox/src/smoothers/**/*.ts","!sandbox/src/**/*.test.ts","!sandbox/src/**/*.spec.ts","!sandbox/src/**/*.d.ts"],"testRunner":"vitest","vitest":{"configFile":"vitest.config.ts","related":true},"checkers":[],"coverageAnalysis":"all","reporters":["html","json","clear-text","progress"],"htmlReporter":{"fileName":"reports/mutation/index.html"},"jsonReporter":{"fileName":"reports/mutation/mutation-report.json"},"thresholds":{"high":80,"low":60,"break":50},"concurrency":1,"timeoutMS":60000,"logLevel":"info","allowConsoleColors":true,"checkerNodeArgs":[],"commandRunner":{"command":"npm test"},"clearTextReporter":{"allowColor":true,"allowEmojis":false,"logTests":true,"maxTestsToLog":3,"reportTests":true,"reportMutants":true,"reportScoreTable":true,"skipFull":false},"dashboard":{"baseUrl":"https://dashboard.stryker-mutator.io/api/reports","reportType":"full"},"dryRunOnly":false,"eventReporter":{"baseDir":"reports/mutation/events"},"ignorePatterns":[],"ignoreStatic":false,"incremental":false,"incrementalFile":"reports/stryker-incremental.json","force":false,"fileLogLevel":"off","inPlace":false,"maxConcurrentTestRunners":9007199254740991,"maxTestRunnerReuse":0,"mutator":{"plugins":null,"excludedMutations":[]},"plugins":["@stryker-mutator/*"],"appendPlugins":[],"disableTypeChecks":true,"symlinkNodeModules":true,"tempDirName":".stryker-tmp","cleanTempDir":true,"testRunnerNodeArgs":[],"timeoutFactor":1.5,"dryRunTimeoutMinutes":5,"tsconfigFile":"tsconfig.json","warnings":true,"disableBail":false,"allowEmpty":false,"ignorers":[],"typescriptChecker":{"prioritizePerformanceOverAccuracy":true}},"framework":{"name":"StrykerJS","version":"9.4.0","branding":{"homepageUrl":"https://stryker-mutator.io","imageUrl":"data:image/svg+xml;utf8,%3Csvg viewBox='0 0 1458 1458' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' clip-rule='evenodd' stroke-linejoin='round' stroke-miterlimit='2'%3E%3Cpath fill='none' d='M0 0h1458v1458H0z'/%3E%3CclipPath id='a'%3E%3Cpath d='M0 0h1458v1458H0z'/%3E%3C/clipPath%3E%3Cg clip-path='url(%23a)'%3E%3Cpath d='M1458 729c0 402.655-326.345 729-729 729S0 1131.655 0 729C0 326.445 326.345 0 729 0s729 326.345 729 729' fill='%23e74c3c' fill-rule='nonzero'/%3E%3Cpath d='M778.349 1456.15L576.6 1254.401l233-105 85-78.668v-64.332l-257-257-44-187-50-208 251.806-82.793L1076.6 389.401l380.14 379.15c-19.681 367.728-311.914 663.049-678.391 687.599z' fill-opacity='.3'/%3E%3Cpath d='M753.4 329.503c41.79 0 74.579 7.83 97.925 25.444 23.571 18.015 41.69 43.956 55.167 77.097l11.662 28.679 165.733-58.183-14.137-32.13c-26.688-60.655-64.896-108.61-114.191-144.011-49.329-35.423-117.458-54.302-204.859-54.302-50.78 0-95.646 7.376-134.767 21.542-40.093 14.671-74.09 34.79-102.239 60.259-28.84 26.207-50.646 57.06-65.496 92.701-14.718 35.052-22.101 72.538-22.101 112.401 0 72.536 20.667 133.294 61.165 182.704 38.624 47.255 98.346 88.037 179.861 121.291 42.257 17.475 78.715 33.125 109.227 46.994 27.193 12.361 49.294 26.124 66.157 41.751 15.309 14.186 26.497 30.584 33.63 49.258 7.721 20.214 11.16 45.69 11.16 76.402 0 28.021-4.251 51.787-13.591 71.219-8.832 18.374-20.171 33.178-34.523 44.219-14.787 11.374-31.193 19.591-49.393 24.466-19.68 5.359-39.14 7.993-58.69 7.993-29.359 0-54.387-3.407-75.182-10.747-20.112-7.013-37.144-16.144-51.259-27.486-13.618-11.009-24.971-23.766-33.744-38.279-9.64-15.8-17.272-31.924-23.032-48.408l-10.965-31.376-161.669 60.585 10.734 30.124c10.191 28.601 24.197 56.228 42.059 82.748 18.208 27.144 41.322 51.369 69.525 72.745 27.695 21.075 60.904 38.218 99.481 51.041 37.777 12.664 82.004 19.159 132.552 19.159 49.998 0 95.818-8.321 137.611-24.622 42.228-16.471 78.436-38.992 108.835-67.291 30.719-28.597 54.631-62.103 71.834-100.642 17.263-38.56 25.923-79.392 25.923-122.248 0-54.339-8.368-100.37-24.208-138.32-16.29-38.759-38.252-71.661-65.948-98.797-26.965-26.418-58.269-48.835-93.858-67.175-33.655-17.241-69.196-33.11-106.593-47.533-35.934-13.429-65.822-26.601-89.948-39.525-22.153-11.868-40.009-24.21-53.547-37.309-11.429-11.13-19.83-23.678-24.718-37.664-5.413-15.49-7.98-33.423-7.98-53.577 0-40.883 11.293-71.522 37.086-90.539 28.443-20.825 64.985-30.658 109.311-30.658z' fill='%23f1c40f' fill-rule='nonzero'/%3E%3Cpath d='M720 0h18v113h-18zM1458 738v-18h-113v18h113zM720 1345h18v113h-18zM113 738v-18H0v18h113z'/%3E%3C/g%3E%3C/svg%3E"},"dependencies":{"@stryker-mutator/typescript-checker":"9.4.0","typescript":"5.9.3","webpack":"5.104.1"}}}